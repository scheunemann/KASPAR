!function(){define("common/services/ModelBuilder",["require","angular","angularResource"],function(require){var angular=require("angular");require("angularResource");var ModelBuilder=function(){this.basePath="",this.setBasePath=function(path){-1==path.indexOf("/",path.length-1)&&(path+="/"),this.basePath=path},this.transformResponse=function(data,headersGetter){data=angular.fromJson(data);var newResponse=(headersGetter(),data.objects);return newResponse.paging={num_results:data.num_results,page:data.page,total_pages:data.total_pages},newResponse},this.$get=["$resource","$q","$rootScope",function($resource,$q){var root=this,getModel=function(model,params,methods,url){url=void 0===url?root.basePath+model+"/:id":root.basePath+url;var defaultMethods={update:{method:"PUT",isArray:!1},create:{method:"POST"},get:{method:"GET",cache:!0},query:{method:"GET",isArray:!0,transformResponse:root.transformResponse}},defaultParams={id:"@id"};methods=angular.extend(defaultMethods,methods);for(var name in methods)methods[name].hasOwnProperty("url")&&(methods[name].url=root.basePath+methods[name].url);params=angular.extend(defaultParams,params);var resource=$resource(url,params,methods);return resource.prototype.getProperty=function(propName){var key="$__"+propName;if(void 0===this[key]){var subUrl=root.basePath+model+"/"+this.id+"/"+propName;this[key]=$resource(subUrl,{},defaultMethods).query()}return this[key]},resource.prototype.getConcreteClassInstance=function(){if(this.$concreteResolved)return this;if(void 0===this.id||void 0===this.type){if(void 0!==this.$promise)return this;var def=$q.defer();return this.$promise=def.promise,def.resolve(this),this}var concreteModel=getModel(this.type),concreteInstance=concreteModel.get({id:this.id});return concreteInstance.$promise.then(function(res){res.$concreteResolved=!0}),concreteInstance},resource.prototype.$save=function(){return this.id?this.$update():this.$create()},resource.queryBase=resource.query,resource.query=function(params){if(void 0!==params){var q={};q.filters=[];for(var key in params)q.filters.push({name:key,op:null===params[key]?"is_null":"==",val:params[key]});return this.queryBase({q:q})}return this.queryBase()},resource};return{getModel:getModel}}]};return ModelBuilder}),define("common/services/modelServices",["require","angular","angularResource","./ModelBuilder"],function(require){{var angular=require("angular"),angularResource=require("angularResource"),ModelBuilder=require("./ModelBuilder"),moduleName="kasparGUI.common.modelServices",dependancies=[angularResource];angular.module(moduleName,dependancies).provider("modelBuilder",ModelBuilder)}return moduleName}),define("text!default.tpl.html",[],function(){return'<h3 class="text-center">Default start page</h3>\r\n<strong>TODO</strong>\r\n<ul>\r\n	<li><strong> Login screen </strong></li>\r\n	<li><strong> User customisations </strong>\r\n		<ul>\r\n			<li>behaviour overrides</li>\r\n			<li>trigger overrides</li>\r\n			<li>global speed modifier (should this include timings?)</li>\r\n		</ul></li>\r\n	<li><strong> Language/Terminology corrections </strong>\r\n		<ul>\r\n			<li>Need to work with teachers to tune language</li>\r\n		</ul></li>\r\n	<li><strong> Visual cleanup </strong>\r\n		<ul>\r\n			<li>better feedback on save/update</li>\r\n			<li>reset save/update/disabled when changing model</li>\r\n			<li>alignment/sizing</li>\r\n			<li>consistent formatting</li>\r\n		</ul></li>\r\n	<li><strong>Tootips on input screens</strong></li>\r\n	<li><strong> Performance </strong>\r\n		<ul>\r\n			<li>base.(de)serialise may need to be revisited and written\r\n				explicitly for each model</li>\r\n			<li>Rollback doesn\'t appear to work properly for SQL rejected\r\n				data</li>\r\n		</ul></li>\r\n</ul>'}),define("common/i18n/en-gb",["require"],function(){var enGb={"action.label":"Action","action.select.prompt":"--Select Action--","action.test":"Test","action.stop":"Stop","action.import.selectFiles":"Select Files","action.import.upload":"Upload","action.new":"New","action.delete":"Delete","action.type.label":"Type","action.type.select.prompt":"--Select Type--","action.sound.name":"Name","action.sound.selectFile":"Select File","action.sound.upload":"Upload","action.sequence.name":"Name","action.sequence.actions.list.label":"All Behaviours","action.sequence.actions.add":"Add","action.sequence.actions.remove":"Remove","action.sequence.actions.moveUp":"Move Up","action.sequence.actions.moveDown":"Move Down","action.sequence.actions.title":"Sequence Behaviours","action.sequence.help.short":"All selected behaviours will attempt execute in order","action.pose.name":"Name","action.pose.type.prompt":"Select pose entry mode","action.pose.basic.label":"Basic","action.pose.basic.poseable":"Release group servos","action.pose.advanced.label":"Detailed","action.pose.speedModifier":"Speed Modifier","action.pose.speedModifier.short":"Speed","action.pose.minLength":"Minimum Length","action.pose.minLength.short":"Length","action.pose.minLength.units":"seconds","action.pose.joint.name":"Joint Name","action.pose.joint.name.short":"Name","action.pose.joint.select.prompt":"--Select Joint--","action.pose.joint.delete":"Remove","action.pose.joint.poseable":"Release","action.pose.joint.position":"Position","action.pose.joint.speed":"Speed","action.group.name":"Name","action.group.actions.list.label":"All Behaviours","action.group.actions.add":"Add","action.group.actions.remove":"Remove","action.group.actions.title":"Group Behaviours","action.group.help.short":"All selected behaviours will attempt to execute simultaneously","common.setting.robot.label":"Attached Robot","common.setting.robot.select.prompt":"--Select Robot--","interaction.operator.label":"Operator","interaction.operator.select.prompt":"--Select Operator--","interaction.user.label":"User","interaction.user.select.prompt":"--Select User--","interaction.start":"Start","interaction.stop":"Stop","interaction.operator.view.buttons.label":"User Buttons","interaction.operator.view.activateBindings":"Activate Bindings","interaction.operator.view.showHotkeys":"Show Hotkeys","operator.label":"Operator","operator.select.prompt":"--Select Operator--","operator.new":"New","operator.delete":"Delete","operator.name":"Name","operator.users":"Common Users","robot.label":"Robot","robot.select.prompt":"--Select Robot--","robot.new":"New","robot.delete":"Delete","robot.view.servoModel.label":"Servo Model Configs","robot.view.servoModel.id":"Servo Model Id","robot.view.servoModel.port":"Port","robot.view.servoModel.portSpeed":"Port Speed","robot.view.servoModel.position.scale":"Position Scale","robot.view.servoModel.position.offset":"Position Offset","robot.view.servoModel.position.min":"Min Position","robot.view.servoModel.position.max":"Max Position","robot.view.servoModel.position.default":"Default Position","robot.view.servoModel.speed.scale":"Speed Scale","robot.view.servoModel.speed.min":"Min Speed","robot.view.servoModel.speed.max":"Max Speed","robot.view.servoModel.speed.default":"Default Speed","robot.view.servoModel.poseable":"Poseable","robot.view.servoModel.otherSettings":"Other","robot.view.servoGroups.label":"Servo Groups","robot.view.servoGroups.servoName":"Servo Name","robot.view.servos.label":"Servos","robot.view.servos.model.id":"Servo Model Id","robot.view.servos.position.scale":"Position Scale","robot.view.servos.position.offset":"Position Offset","robot.view.servos.position.min":"Min Position","robot.view.servos.position.max":"Max Position","robot.view.servos.position.default":"Default Position","robot.view.servos.speed.scale":"Speed Scale","robot.view.servos.speed.min":"Min Speed","robot.view.servos.speed.max":"Max Speed","robot.view.servos.speed.default":"Default Speed","robot.view.servos.poseable":"Poseable","robot.view.servos.otherSettings":"Other","robot.interface.robot":"Attached Robot","robot.interface.robot.short":"Robot","robot.interface.robot.select.prompt":"--Select Robot--","robot.interface.connect":"Connect","robot.interface.disconnect":"Disconnect","robot.name":"Name","robot.model":"Model","robot.model.select.prompt":"--Select Model--","robot.version":"Version","trigger.import.selectFiles":"Select Files","trigger.import.upload":"Upload","trigger.label":"Trigger","trigger.select.prompt":"--Select Trigger--","trigger.new":"New","trigger.delete":"Delete","trigger.type.label":"Type","trigger.type.select.prompt":"--Select Type--","trigger.time.name":"Name","trigger.time.action":"Action","trigger.time.action.select.prompt":"No Action","trigger.time.trigger":"Trigger","trigger.time.trigger.select.prompt":"--Select Trigger--","trigger.time.time":"Time","trigger.time.time.while":"While Active","trigger.time.time.since":"Since Deactivated","trigger.time.time.units":"seconds","trigger.sensor.connect":"Connect","trigger.sensor.disconnect":"Disconnect","trigger.sensor.current":"Current","trigger.sensor.basic.label":"Basic","trigger.sensor.basic.on":"Active","trigger.sensor.basic.off":"Inactive","trigger.sensor.basic.help.short":"As determined by sensor type","trigger.sensor.advanced.label":"Detailed","trigger.sensor.advanced.compare.label":"Active when current value","trigger.sensor.advanced.compare.select.prompt":"--Select Value--","trigger.sensor.name":"Name","trigger.sensor.action":"Action","trigger.sensor.action.select.prompt":"No Action","trigger.sensor.sensor":"Sensor","trigger.sensor.sensor.select.prompt":"--Select Sensor--","trigger.button.hotkey.label":"Keyboard Button","trigger.button.hotkey.delete":"Delete","trigger.button.hotkey.new":"New Keyboard Button","trigger.button.name":"Name","trigger.button.action":"Action","trigger.button.action.select.prompt":"No Action","trigger.compound.name":"Name","trigger.compound.action":"Action","trigger.compound.action.select.prompt":"No Action","user.label":"User","user.select.prompt":"--Select User--","user.new":"New","user.delete":"Delete","user.name":"Name","user.speedModifier":"Movement Speed","user.custom.action.label":"Custom Behaviours","user.custom.action.new":"New","user.custom.action.delete":"Delete","user.custom.action.override":"Action to Override","user.custom.action.redirect":"Override Action","user.custom.trigger.label":"Custom Triggers","user.custom.trigger.new":"New","user.custom.trigger.delete":"Delete","navbar.admin.label":"Admin","navbar.admin.operators":"Operators","navbar.admin.users":"Users","navbar.admin.robots":"Robots","navbar.admin.settings":"Settings","navbar.action.label":"Action","navbar.action.edit":"Create/Edit","navbar.action.test":"Test","navbar.action.import":"Import","navbar.trigger.label":"Trigger","navbar.trigger.edit":"Create/Edit","navbar.trigger.test":"Test","navbar.trigger.import":"Import","navbar.interaction.label":"Interactions","navbar.interaction.view":"View History","navbar.interaction.begin":"Begin New","navbar.interaction.manage":"Manage History"};return enGb}),define("common/i18n/Language",["require","../i18n/en-gb"],function(require){var enGB=require("../i18n/en-gb"),Language=function(){this.language="en-gb",this.setLanguage=function(language){this.language=language},this.getText=function(){return enGB}};return Language}),define("common/i18n/languageServices",["require","angular","./Language"],function(require){{var angular=require("angular"),Language=require("./Language"),moduleName="kasparGUI.common.languageServices",dependancies=[];angular.module(moduleName,dependancies).service("language",Language)}return moduleName}),define("actions/models/Action",["require"],function(){var Action=function(modelBuilder){var resource=modelBuilder.getModel("Action",{},{create:{method:"POST",url:":type",params:{type:"@type"},isArray:!1},update:{method:"PUT",url:":type/:id",params:{type:"@type",id:"@id"},isArray:!1}});return resource};return["modelBuilder",Action]}),define("actions/models/ActionTest",["require"],function(){var ActionTest=function(modelBuilder){var _service=modelBuilder.getModel("ActionTest",{},{},"Action/:id/Test");return _service};return["modelBuilder",ActionTest]}),define("actions/models/ActionType",["require"],function(){var ActionType=function(modelBuilder){var _service=modelBuilder.getModel("ActionType");return _service};return["modelBuilder",ActionType]}),define("actions/models/JointPosition",["require"],function(){var JointPosition=function(modelBuilder){var _service=modelBuilder.getModel("JointPosition");return _service};return["modelBuilder",JointPosition]}),define("actions/models/SequenceOrder",["require"],function(){var SequenceOrder=function(modelBuilder){var _service=modelBuilder.getModel("SequenceOrder");return _service};return["modelBuilder",SequenceOrder]}),define("actions/models",["require","angular","angularResource","./models/Action","./models/ActionTest","./models/ActionType","./models/JointPosition","./models/SequenceOrder"],function(require){{var angular=require("angular"),angularResource=require("angularResource"),Action=require("./models/Action"),ActionTest=require("./models/ActionTest"),ActionType=require("./models/ActionType"),JointPosition=require("./models/JointPosition"),SequenceOrder=require("./models/SequenceOrder"),moduleName="kasparGUI.actions.models",dependancies=[angularResource];angular.module(moduleName,dependancies).factory("Action",Action).factory("ActionTest",ActionTest).factory("ActionType",ActionType).factory("JointPosition",JointPosition).factory("SequenceOrder",SequenceOrder)}return moduleName}),define("common/services/HotkeyFormatter",["require"],function(){var HotkeyFormatter=function(){this.getDisplayFromEvent=function(keyEvent){var code=keyEvent.which||keyEvent.keyCode,modifiers="";keyEvent.altKey&&(modifiers+="alt+"),keyEvent.ctrlKey&&(modifiers+="ctrl+"),keyEvent.shiftKey&&(modifiers+="shift+");var disp=this.getCharDisplay(code);return""!==disp||""!==modifiers?modifiers+disp:""},this.getCharDisplay=function(charCode){var char;return char=8==charCode?"backspace":9==charCode?"":13==charCode?"enter":16==charCode?"":17==charCode?"":18==charCode?"":19==charCode?"":20==charCode?"":27==charCode?"escape":32==charCode?"space":33==charCode?"pageup":34==charCode?"pagedown":35==charCode?"end":36==charCode?"home":37==charCode?"left":38==charCode?"up":39==charCode?"right":40==charCode?"down":45==charCode?"ins":46==charCode?"del":91==charCode?"":92==charCode?"":93==charCode?"":96==charCode?"0":97==charCode?"1":98==charCode?"2":99==charCode?"3":100==charCode?"4":101==charCode?"5":102==charCode?"6":103==charCode?"7":104==charCode?"8":105==charCode?"9":106==charCode?"*":107==charCode?"+":109==charCode?"-":110==charCode?".":111==charCode?"/":112==charCode?"F1":113==charCode?"F2":114==charCode?"F3":115==charCode?"F4":116==charCode?"F5":117==charCode?"F6":118==charCode?"F7":119==charCode?"F8":120==charCode?"F9":121==charCode?"F10":122==charCode?"F11":123==charCode?"F12":144==charCode?"":145==charCode?"":186==charCode?";":187==charCode?"=":188==charCode?",":189==charCode?"-":190==charCode?".":191==charCode?"/":192==charCode?"`":219==charCode?"[":220==charCode?"\\":221==charCode?"]":222==charCode?"'":String.fromCharCode(charCode)}};return HotkeyFormatter}),define("common/services/displayServices",["require","angular","./HotkeyFormatter"],function(require){{var angular=require("angular"),HotkeyFormatter=require("./HotkeyFormatter"),moduleName="kasparGUI.common.displayServices",dependancies=[];angular.module(moduleName,dependancies).service("hotkeyFormatter",HotkeyFormatter)}return moduleName});var io="undefined"==typeof module?{}:module.exports;!function(){if(function(exports,global){var io=exports;io.version="0.9.16",io.protocol=1,io.transports=[],io.j=[],io.sockets={},io.connect=function(host,details){var uuri,socket,uri=io.util.parseUri(host);global&&global.location&&(uri.protocol=uri.protocol||global.location.protocol.slice(0,-1),uri.host=uri.host||(global.document?global.document.domain:global.location.hostname),uri.port=uri.port||global.location.port),uuri=io.util.uniqueUri(uri);var options={host:uri.host,secure:"https"==uri.protocol,port:uri.port||("https"==uri.protocol?443:80),query:uri.query||""};return io.util.merge(options,details),(options["force new connection"]||!io.sockets[uuri])&&(socket=new io.Socket(options)),!options["force new connection"]&&socket&&(io.sockets[uuri]=socket),socket=socket||io.sockets[uuri],socket.of(uri.path.length>1?uri.path:"")}}("object"==typeof module?module.exports:this.io={},this),function(exports,global){var util=exports.util={},re=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];util.parseUri=function(str){for(var m=re.exec(str||""),uri={},i=14;i--;)uri[parts[i]]=m[i]||"";return uri},util.uniqueUri=function(uri){var protocol=uri.protocol,host=uri.host,port=uri.port;return"document"in global?(host=host||document.domain,port=port||("https"==protocol&&"https:"!==document.location.protocol?443:document.location.port)):(host=host||"localhost",port||"https"!=protocol||(port=443)),(protocol||"http")+"://"+host+":"+(port||80)},util.query=function(base,addition){var query=util.chunkQuery(base||""),components=[];util.merge(query,util.chunkQuery(addition||""));for(var part in query)query.hasOwnProperty(part)&&components.push(part+"="+query[part]);return components.length?"?"+components.join("&"):""},util.chunkQuery=function(qs){for(var kv,query={},params=qs.split("&"),i=0,l=params.length;l>i;++i)kv=params[i].split("="),kv[0]&&(query[kv[0]]=kv[1]);return query};var pageLoaded=!1;util.load=function(fn){return"document"in global&&"complete"===document.readyState||pageLoaded?fn():void util.on(global,"load",fn,!1)},util.on=function(element,event,fn,capture){element.attachEvent?element.attachEvent("on"+event,fn):element.addEventListener&&element.addEventListener(event,fn,capture)},util.request=function(xdomain){if(xdomain&&"undefined"!=typeof XDomainRequest&&!util.ua.hasCORS)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!xdomain||util.ua.hasCORS))return new XMLHttpRequest;if(!xdomain)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}return null},"undefined"!=typeof window&&util.load(function(){pageLoaded=!0}),util.defer=function(fn){return util.ua.webkit&&"undefined"==typeof importScripts?void util.load(function(){setTimeout(fn,100)}):fn()},util.merge=function(target,additional,deep,lastseen){var prop,seen=lastseen||[],depth="undefined"==typeof deep?2:deep;for(prop in additional)additional.hasOwnProperty(prop)&&util.indexOf(seen,prop)<0&&("object"==typeof target[prop]&&depth?util.merge(target[prop],additional[prop],depth-1,seen):(target[prop]=additional[prop],seen.push(additional[prop])));return target},util.mixin=function(ctor,ctor2){util.merge(ctor.prototype,ctor2.prototype)},util.inherit=function(ctor,ctor2){function f(){}f.prototype=ctor2.prototype,ctor.prototype=new f},util.isArray=Array.isArray||function(obj){return"[object Array]"===Object.prototype.toString.call(obj)},util.intersect=function(arr,arr2){for(var ret=[],longest=arr.length>arr2.length?arr:arr2,shortest=arr.length>arr2.length?arr2:arr,i=0,l=shortest.length;l>i;i++)~util.indexOf(longest,shortest[i])&&ret.push(shortest[i]);return ret},util.indexOf=function(arr,o,i){for(var j=arr.length,i=0>i?0>i+j?0:i+j:i||0;j>i&&arr[i]!==o;i++);return i>=j?-1:i},util.toArray=function(enu){for(var arr=[],i=0,l=enu.length;l>i;i++)arr.push(enu[i]);return arr},util.ua={},util.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var a=new XMLHttpRequest}catch(e){return!1}return void 0!=a.withCredentials}(),util.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),util.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(exports,io){function EventEmitter(){}exports.EventEmitter=EventEmitter,EventEmitter.prototype.on=function(name,fn){return this.$events||(this.$events={}),this.$events[name]?io.util.isArray(this.$events[name])?this.$events[name].push(fn):this.$events[name]=[this.$events[name],fn]:this.$events[name]=fn,this},EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.once=function(name,fn){function on(){self.removeListener(name,on),fn.apply(this,arguments)}var self=this;return on.listener=fn,this.on(name,on),this},EventEmitter.prototype.removeListener=function(name,fn){if(this.$events&&this.$events[name]){var list=this.$events[name];if(io.util.isArray(list)){for(var pos=-1,i=0,l=list.length;l>i;i++)if(list[i]===fn||list[i].listener&&list[i].listener===fn){pos=i;break}if(0>pos)return this;list.splice(pos,1),list.length||delete this.$events[name]}else(list===fn||list.listener&&list.listener===fn)&&delete this.$events[name]}return this},EventEmitter.prototype.removeAllListeners=function(name){return void 0===name?(this.$events={},this):(this.$events&&this.$events[name]&&(this.$events[name]=null),this)},EventEmitter.prototype.listeners=function(name){return this.$events||(this.$events={}),this.$events[name]||(this.$events[name]=[]),io.util.isArray(this.$events[name])||(this.$events[name]=[this.$events[name]]),this.$events[name]},EventEmitter.prototype.emit=function(name){if(!this.$events)return!1;var handler=this.$events[name];if(!handler)return!1;var args=Array.prototype.slice.call(arguments,1);if("function"==typeof handler)handler.apply(this,args);else{if(!io.util.isArray(handler))return!1;for(var listeners=handler.slice(),i=0,l=listeners.length;l>i;i++)listeners[i].apply(this,args)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,nativeJSON){function f(n){return 10>n?"0"+n:n}function date(d){return isFinite(d.valueOf())?d.getUTCFullYear()+"-"+f(d.getUTCMonth()+1)+"-"+f(d.getUTCDate())+"T"+f(d.getUTCHours())+":"+f(d.getUTCMinutes())+":"+f(d.getUTCSeconds())+"Z":null}function quote(string){return escapable.lastIndex=0,escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,partial,mind=gap,value=holder[key];switch(value instanceof Date&&(value=date(key)),"function"==typeof rep&&(value=rep.call(holder,key,value)),typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";if(gap+=indent,partial=[],"[object Array]"===Object.prototype.toString.apply(value)){for(length=value.length,i=0;length>i;i+=1)partial[i]=str(i,value)||"null";return v=0===partial.length?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]",gap=mind,v}if(rep&&"object"==typeof rep)for(length=rep.length,i=0;length>i;i+=1)"string"==typeof rep[i]&&(k=rep[i],v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v));else for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v));return v=0===partial.length?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}",gap=mind,v}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(value,replacer,space){var i;if(gap="",indent="","number"==typeof space)for(i=0;space>i;i+=1)indent+=" ";else"string"==typeof space&&(indent=space);if(rep=replacer,replacer&&"function"!=typeof replacer&&("object"!=typeof replacer||"number"!=typeof replacer.length))throw new Error("JSON.stringify");return str("",{"":value})},JSON.parse=function(text,reviver){function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof JSON?JSON:void 0),function(exports,io){var parser=exports.parser={},packets=parser.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],reasons=parser.reasons=["transport not supported","client not handshaken","unauthorized"],advice=parser.advice=["reconnect"],JSON=io.JSON,indexOf=io.util.indexOf;parser.encodePacket=function(packet){var type=indexOf(packets,packet.type),id=packet.id||"",endpoint=packet.endpoint||"",ack=packet.ack,data=null;switch(packet.type){case"error":var reason=packet.reason?indexOf(reasons,packet.reason):"",adv=packet.advice?indexOf(advice,packet.advice):"";(""!==reason||""!==adv)&&(data=reason+(""!==adv?"+"+adv:""));break;case"message":""!==packet.data&&(data=packet.data);break;case"event":var ev={name:packet.name};packet.args&&packet.args.length&&(ev.args=packet.args),data=JSON.stringify(ev);break;case"json":data=JSON.stringify(packet.data);break;case"connect":packet.qs&&(data=packet.qs);break;case"ack":data=packet.ackId+(packet.args&&packet.args.length?"+"+JSON.stringify(packet.args):"")}var encoded=[type,id+("data"==ack?"+":""),endpoint];return null!==data&&void 0!==data&&encoded.push(data),encoded.join(":")},parser.encodePayload=function(packets){var decoded="";if(1==packets.length)return packets[0];for(var i=0,l=packets.length;l>i;i++){var packet=packets[i];decoded+="�"+packet.length+"�"+packets[i]}return decoded};var regexp=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;parser.decodePacket=function(data){var pieces=data.match(regexp);if(!pieces)return{};var id=pieces[2]||"",data=pieces[5]||"",packet={type:packets[pieces[1]],endpoint:pieces[4]||""};switch(id&&(packet.id=id,packet.ack=pieces[3]?"data":!0),packet.type){case"error":var pieces=data.split("+");packet.reason=reasons[pieces[0]]||"",packet.advice=advice[pieces[1]]||"";break;case"message":packet.data=data||"";break;case"event":try{var opts=JSON.parse(data);packet.name=opts.name,packet.args=opts.args}catch(e){}packet.args=packet.args||[];break;case"json":try{packet.data=JSON.parse(data)}catch(e){}break;case"connect":packet.qs=data||"";break;case"ack":var pieces=data.match(/^([0-9]+)(\+)?(.*)/);if(pieces&&(packet.ackId=pieces[1],packet.args=[],pieces[3]))try{packet.args=pieces[3]?JSON.parse(pieces[3]):[]}catch(e){}break;case"disconnect":case"heartbeat":}return packet},parser.decodePayload=function(data){if("�"==data.charAt(0)){for(var ret=[],i=1,length="";i<data.length;i++)"�"==data.charAt(i)?(ret.push(parser.decodePacket(data.substr(i+1).substr(0,length))),i+=Number(length)+1,length=""):length+=data.charAt(i);return ret}return[parser.decodePacket(data)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,io){function Transport(socket,sessid){this.socket=socket,this.sessid=sessid}exports.Transport=Transport,io.util.mixin(Transport,io.EventEmitter),Transport.prototype.heartbeats=function(){return!0},Transport.prototype.onData=function(data){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==data){var msgs=io.parser.decodePayload(data);if(msgs&&msgs.length)for(var i=0,l=msgs.length;l>i;i++)this.onPacket(msgs[i])}return this},Transport.prototype.onPacket=function(packet){return this.socket.setHeartbeatTimeout(),"heartbeat"==packet.type?this.onHeartbeat():("connect"==packet.type&&""==packet.endpoint&&this.onConnect(),"error"==packet.type&&"reconnect"==packet.advice&&(this.isOpen=!1),this.socket.onPacket(packet),this)},Transport.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var self=this;this.closeTimeout=setTimeout(function(){self.onDisconnect()},this.socket.closeTimeout)}},Transport.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},Transport.prototype.onConnect=function(){return this.socket.onConnect(),this},Transport.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},Transport.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},Transport.prototype.packet=function(packet){this.send(io.parser.encodePacket(packet))},Transport.prototype.onHeartbeat=function(){this.packet({type:"heartbeat"})},Transport.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},Transport.prototype.onClose=function(){this.isOpen=!1,this.socket.onClose(),this.onDisconnect()},Transport.prototype.prepareUrl=function(){var options=this.socket.options;return this.scheme()+"://"+options.host+":"+options.port+"/"+options.resource+"/"+io.protocol+"/"+this.name+"/"+this.sessid},Transport.prototype.ready=function(socket,fn){fn.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,io,global){function Socket(options){if(this.options={port:80,secure:!1,document:"document"in global?document:!1,resource:"socket.io",transports:io.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,manualFlush:!1},io.util.merge(this.options,options),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||io.util.ua.hasCORS)){var self=this;io.util.on(global,"beforeunload",function(){self.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function empty(){}exports.Socket=Socket,io.util.mixin(Socket,io.EventEmitter),Socket.prototype.of=function(name){return this.namespaces[name]||(this.namespaces[name]=new io.SocketNamespace(this,name),""!==name&&this.namespaces[name].packet({type:"connect"})),this.namespaces[name]},Socket.prototype.publish=function(){this.emit.apply(this,arguments);var nsp;for(var i in this.namespaces)this.namespaces.hasOwnProperty(i)&&(nsp=this.of(i),nsp.$emit.apply(nsp,arguments))},Socket.prototype.handshake=function(fn){function complete(data){data instanceof Error?(self.connecting=!1,self.onError(data.message)):fn.apply(null,data.split(":"))}var self=this,options=this.options,url=["http"+(options.secure?"s":"")+":/",options.host+":"+options.port,options.resource,io.protocol,io.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!io.util.ua.hasCORS){var insertAt=document.getElementsByTagName("script")[0],script=document.createElement("script");script.src=url+"&jsonp="+io.j.length,insertAt.parentNode.insertBefore(script,insertAt),io.j.push(function(data){complete(data),script.parentNode.removeChild(script)})}else{var xhr=io.util.request();xhr.open("GET",url,!0),this.isXDomain()&&(xhr.withCredentials=!0),xhr.onreadystatechange=function(){4==xhr.readyState&&(xhr.onreadystatechange=empty,200==xhr.status?complete(xhr.responseText):403==xhr.status?self.onError(xhr.responseText):(self.connecting=!1,!self.reconnecting&&self.onError(xhr.responseText)))
},xhr.send(null)}},Socket.prototype.getTransport=function(override){for(var transport,transports=override||this.transports,i=0;transport=transports[i];i++)if(io.Transport[transport]&&io.Transport[transport].check(this)&&(!this.isXDomain()||io.Transport[transport].xdomainCheck(this)))return new io.Transport[transport](this,this.sessionid);return null},Socket.prototype.connect=function(fn){if(this.connecting)return this;var self=this;return self.connecting=!0,this.handshake(function(sid,heartbeat,close,transports){function connect(transports){return self.transport&&self.transport.clearTimeouts(),self.transport=self.getTransport(transports),self.transport?void self.transport.ready(self,function(){self.connecting=!0,self.publish("connecting",self.transport.name),self.transport.open(),self.options["connect timeout"]&&(self.connectTimeoutTimer=setTimeout(function(){if(!self.connected&&(self.connecting=!1,self.options["try multiple transports"])){for(var remaining=self.transports;remaining.length>0&&remaining.splice(0,1)[0]!=self.transport.name;);remaining.length?connect(remaining):self.publish("connect_failed")}},self.options["connect timeout"]))}):self.publish("connect_failed")}self.sessionid=sid,self.closeTimeout=1e3*close,self.heartbeatTimeout=1e3*heartbeat,self.transports||(self.transports=self.origTransports=transports?io.util.intersect(transports.split(","),self.options.transports):self.options.transports),self.setHeartbeatTimeout(),connect(self.transports),self.once("connect",function(){clearTimeout(self.connectTimeoutTimer),fn&&"function"==typeof fn&&fn()})}),this},Socket.prototype.setHeartbeatTimeout=function(){if(clearTimeout(this.heartbeatTimeoutTimer),!this.transport||this.transport.heartbeats()){var self=this;this.heartbeatTimeoutTimer=setTimeout(function(){self.transport.onClose()},this.heartbeatTimeout)}},Socket.prototype.packet=function(data){return this.connected&&!this.doBuffer?this.transport.packet(data):this.buffer.push(data),this},Socket.prototype.setBuffer=function(v){this.doBuffer=v,!v&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},Socket.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},Socket.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this},Socket.prototype.disconnectSync=function(){var xhr=io.util.request(),uri=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,io.protocol,"",this.sessionid].join("/")+"/?disconnect=1";xhr.open("GET",uri,!1),xhr.send(null),this.onDisconnect("booted")},Socket.prototype.isXDomain=function(){var port=global.location.port||("https:"==global.location.protocol?443:80);return this.options.host!==global.location.hostname||this.options.port!=port},Socket.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},Socket.prototype.onOpen=function(){this.open=!0},Socket.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},Socket.prototype.onPacket=function(packet){this.of(packet.endpoint).onPacket(packet)},Socket.prototype.onError=function(err){err&&err.advice&&"reconnect"===err.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",err&&err.reason?err.reason:err)},Socket.prototype.onDisconnect=function(reason){var wasConnected=this.connected,wasConnecting=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(wasConnected||wasConnecting)&&(this.transport.close(),this.transport.clearTimeouts(),wasConnected&&(this.publish("disconnect",reason),"booted"!=reason&&this.options.reconnect&&!this.reconnecting&&this.reconnect()))},Socket.prototype.reconnect=function(){function reset(){if(self.connected){for(var i in self.namespaces)self.namespaces.hasOwnProperty(i)&&""!==i&&self.namespaces[i].packet({type:"connect"});self.publish("reconnect",self.transport.name,self.reconnectionAttempts)}clearTimeout(self.reconnectionTimer),self.removeListener("connect_failed",maybeReconnect),self.removeListener("connect",maybeReconnect),self.reconnecting=!1,delete self.reconnectionAttempts,delete self.reconnectionDelay,delete self.reconnectionTimer,delete self.redoTransports,self.options["try multiple transports"]=tryMultiple}function maybeReconnect(){return self.reconnecting?self.connected?reset():self.connecting&&self.reconnecting?self.reconnectionTimer=setTimeout(maybeReconnect,1e3):void(self.reconnectionAttempts++>=maxAttempts?self.redoTransports?(self.publish("reconnect_failed"),reset()):(self.on("connect_failed",maybeReconnect),self.options["try multiple transports"]=!0,self.transports=self.origTransports,self.transport=self.getTransport(),self.redoTransports=!0,self.connect()):(self.reconnectionDelay<limit&&(self.reconnectionDelay*=2),self.connect(),self.publish("reconnecting",self.reconnectionDelay,self.reconnectionAttempts),self.reconnectionTimer=setTimeout(maybeReconnect,self.reconnectionDelay))):void 0}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var self=this,maxAttempts=this.options["max reconnection attempts"],tryMultiple=this.options["try multiple transports"],limit=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(maybeReconnect,this.reconnectionDelay),this.on("connect",maybeReconnect)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(exports,io){function SocketNamespace(socket,name){this.socket=socket,this.name=name||"",this.flags={},this.json=new Flag(this,"json"),this.ackPackets=0,this.acks={}}function Flag(nsp,name){this.namespace=nsp,this.name=name}exports.SocketNamespace=SocketNamespace,io.util.mixin(SocketNamespace,io.EventEmitter),SocketNamespace.prototype.$emit=io.EventEmitter.prototype.emit,SocketNamespace.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},SocketNamespace.prototype.packet=function(packet){return packet.endpoint=this.name,this.socket.packet(packet),this.flags={},this},SocketNamespace.prototype.send=function(data,fn){var packet={type:this.flags.json?"json":"message",data:data};return"function"==typeof fn&&(packet.id=++this.ackPackets,packet.ack=!0,this.acks[packet.id]=fn),this.packet(packet)},SocketNamespace.prototype.emit=function(name){var args=Array.prototype.slice.call(arguments,1),lastArg=args[args.length-1],packet={type:"event",name:name};return"function"==typeof lastArg&&(packet.id=++this.ackPackets,packet.ack="data",this.acks[packet.id]=lastArg,args=args.slice(0,args.length-1)),packet.args=args,this.packet(packet)},SocketNamespace.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},SocketNamespace.prototype.onPacket=function(packet){function ack(){self.packet({type:"ack",args:io.util.toArray(arguments),ackId:packet.id})}var self=this;switch(packet.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(packet.reason||"booted"):this.$emit("disconnect",packet.reason);break;case"message":case"json":var params=["message",packet.data];"data"==packet.ack?params.push(ack):packet.ack&&this.packet({type:"ack",ackId:packet.id}),this.$emit.apply(this,params);break;case"event":var params=[packet.name].concat(packet.args);"data"==packet.ack&&params.push(ack),this.$emit.apply(this,params);break;case"ack":this.acks[packet.ackId]&&(this.acks[packet.ackId].apply(this,packet.args),delete this.acks[packet.ackId]);break;case"error":packet.advice?this.socket.onError(packet):"unauthorized"==packet.reason?this.$emit("connect_failed",packet.reason):this.$emit("error",packet.reason)}},Flag.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},Flag.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,io,global){function WS(){io.Transport.apply(this,arguments)}exports.websocket=WS,io.util.inherit(WS,io.Transport),WS.prototype.name="websocket",WS.prototype.open=function(){var Socket,query=io.util.query(this.socket.options.query),self=this;return Socket||(Socket=global.MozWebSocket||global.WebSocket),this.websocket=new Socket(this.prepareUrl()+query),this.websocket.onopen=function(){self.onOpen(),self.socket.setBuffer(!1)},this.websocket.onmessage=function(ev){self.onData(ev.data)},this.websocket.onclose=function(){self.onClose(),self.socket.setBuffer(!0)},this.websocket.onerror=function(e){self.onError(e)},this},WS.prototype.send=io.util.ua.iDevice?function(data){var self=this;return setTimeout(function(){self.websocket.send(data)},0),this}:function(data){return this.websocket.send(data),this},WS.prototype.payload=function(arr){for(var i=0,l=arr.length;l>i;i++)this.packet(arr[i]);return this},WS.prototype.close=function(){return this.websocket.close(),this},WS.prototype.onError=function(e){this.socket.onError(e)},WS.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},WS.check=function(){return"WebSocket"in global&&!("__addTask"in WebSocket)||"MozWebSocket"in global},WS.xdomainCheck=function(){return!0},io.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(exports,io){function Flashsocket(){io.Transport.websocket.apply(this,arguments)}exports.flashsocket=Flashsocket,io.util.inherit(Flashsocket,io.Transport.websocket),Flashsocket.prototype.name="flashsocket",Flashsocket.prototype.open=function(){var self=this,args=arguments;return WebSocket.__addTask(function(){io.Transport.websocket.prototype.open.apply(self,args)}),this},Flashsocket.prototype.send=function(){var self=this,args=arguments;return WebSocket.__addTask(function(){io.Transport.websocket.prototype.send.apply(self,args)}),this},Flashsocket.prototype.close=function(){return WebSocket.__tasks.length=0,io.Transport.websocket.prototype.close.call(this),this},Flashsocket.prototype.ready=function(socket,fn){function init(){var options=socket.options,port=options["flash policy port"],path=["http"+(options.secure?"s":"")+":/",options.host+":"+options.port,options.resource,"static/flashsocket","WebSocketMain"+(socket.isXDomain()?"Insecure":"")+".swf"];Flashsocket.loaded||("undefined"==typeof WEB_SOCKET_SWF_LOCATION&&(WEB_SOCKET_SWF_LOCATION=path.join("/")),843!==port&&WebSocket.loadFlashPolicyFile("xmlsocket://"+options.host+":"+port),WebSocket.__initialize(),Flashsocket.loaded=!0),fn.call(self)}var self=this;return document.body?init():void io.util.load(init)},Flashsocket.check=function(){return"undefined"!=typeof WebSocket&&"__initialize"in WebSocket&&swfobject?swfobject.getFlashPlayerVersion().major>=10:!1},Flashsocket.xdomainCheck=function(){return!0},"undefined"!=typeof window&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0),io.transports.push("flashsocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),"undefined"!=typeof window)var swfobject=function(){function f(){if(!J){try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=!0;for(var X=U.length,Y=0;X>Y;Y++)U[Y]()}}function K(X){J?X():U[U.length]=X}function s(Y){if(typeof O.addEventListener!=D)O.addEventListener("load",Y,!1);else if(typeof j.addEventListener!=D)j.addEventListener("load",Y,!1);else if(typeof O.attachEvent!=D)i(O,"onload",Y);else if("function"==typeof O.onload){var X=O.onload;O.onload=function(){X(),Y()}}else O.onload=Y}function h(){T?V():H()}function V(){var X=j.getElementsByTagName("body")[0],aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;!function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");ab&&(ab=ab.split(" ")[1].split(","),M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)])}else if(10>Y)return Y++,void setTimeout(arguments.callee,10);X.removeChild(aa),Z=null,H()}()}else H()}function H(){var ag=o.length;if(ag>0)for(var af=0;ag>af;af++){var Y=o[af].id,ab=o[af].callbackFn,aa={success:!1,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae)if(!F(o[af].swfVersion)||M.wk&&M.wk<312)if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall,ai.width=ae.getAttribute("width")||"0",ai.height=ae.getAttribute("height")||"0",ae.getAttribute("class")&&(ai.styleclass=ae.getAttribute("class")),ae.getAttribute("align")&&(ai.align=ae.getAttribute("align"));for(var ah={},X=ae.getElementsByTagName("param"),ac=X.length,ad=0;ac>ad;ad++)"movie"!=X[ad].getAttribute("name").toLowerCase()&&(ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value"));P(ai,ah,Y,ab)}else p(ae),ab&&ab(aa);else w(Y,!0),ab&&(aa.success=!0,aa.ref=z(Y),ab(aa))}else if(w(Y,!0),ab){var Z=z(Y);Z&&typeof Z.SetVariable!=D&&(aa.success=!0,aa.ref=Z),ab(aa)}}}function z(aa){var X=null,Y=c(aa);if(Y&&"OBJECT"==Y.nodeName)if(typeof Y.SetVariable!=D)X=Y;else{var Z=Y.getElementsByTagName(r)[0];Z&&(X=Z)}return X}function A(){return!a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=!0,E=Z||null,B={success:!1,id:X};var ae=c(X);if(ae){"OBJECT"==ae.nodeName?(l=g(ae),Q=null):(l=ae,Q=X),aa.id=R,(typeof aa.width==D||!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)&&(aa.width="310"),(typeof aa.height==D||!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)&&(aa.height="137"),j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?["Active"].concat("").join("X"):"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D?ab.flashvars+="&"+ac:ab.flashvars=ac,M.ie&&M.win&&4!=ae.readyState){var Y=C("div");X+="SWFObjectNew",Y.setAttribute("id",X),ae.parentNode.insertBefore(Y,ae),ae.style.display="none",function(){4==ae.readyState?ae.parentNode.removeChild(ae):setTimeout(arguments.callee,10)}()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&4!=Y.readyState){var X=C("div");Y.parentNode.insertBefore(X,Y),X.parentNode.replaceChild(g(Y),X),Y.style.display="none",function(){4==Y.readyState?Y.parentNode.removeChild(Y):setTimeout(arguments.callee,10)}()}else Y.parentNode.replaceChild(g(Y),Y)}function g(ab){var aa=C("div");if(M.win&&M.ie)aa.innerHTML=ab.innerHTML;else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad)for(var X=ad.length,Z=0;X>Z;Z++)1==ad[Z].nodeType&&"PARAM"==ad[Z].nodeName||8==ad[Z].nodeType||aa.appendChild(ad[Z].cloneNode(!0))}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312)return X;if(aa)if(typeof ai.id==D&&(ai.id=Y),M.ie&&M.win){var ah="";for(var ae in ai)ai[ae]!=Object.prototype[ae]&&("data"==ae.toLowerCase()?ag.movie=ai[ae]:"styleclass"==ae.toLowerCase()?ah+=' class="'+ai[ae]+'"':"classid"!=ae.toLowerCase()&&(ah+=" "+ae+'="'+ai[ae]+'"'));var af="";for(var ad in ag)ag[ad]!=Object.prototype[ad]&&(af+='<param name="'+ad+'" value="'+ag[ad]+'" />');aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>",N[N.length]=ai.id,X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai)ai[ac]!=Object.prototype[ac]&&("styleclass"==ac.toLowerCase()?Z.setAttribute("class",ai[ac]):"classid"!=ac.toLowerCase()&&Z.setAttribute(ac,ai[ac]));for(var ab in ag)ag[ab]!=Object.prototype[ab]&&"movie"!=ab.toLowerCase()&&e(Z,ab,ag[ab]);aa.parentNode.replaceChild(Z,aa),X=Z}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X),aa.setAttribute("value",Y),Z.appendChild(aa)}function y(Y){var X=c(Y);X&&"OBJECT"==X.nodeName&&(M.ie&&M.win?(X.style.display="none",function(){4==X.readyState?b(Y):setTimeout(arguments.callee,10)}()):X.parentNode.removeChild(X))}function b(Z){var Y=c(Z);if(Y){for(var X in Y)"function"==typeof Y[X]&&(Y[X]=null);Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y),I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");return X[0]=parseInt(X[0],10),X[1]=parseInt(X[1],10)||0,X[2]=parseInt(X[2],10)||0,Y[0]>X[0]||Y[0]==X[0]&&Y[1]>X[1]||Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]?!0:!1}function v(ac,Y,ad,ab){if(!M.ie||!M.mac){var aa=j.getElementsByTagName("head")[0];if(aa){var X=ad&&"string"==typeof ad?ad:"screen";if(ab&&(n=null,G=null),!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css"),Z.setAttribute("media",X),n=aa.appendChild(Z),M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0&&(n=j.styleSheets[j.styleSheets.length-1]),G=X}M.ie&&M.win?n&&typeof n.addRule==r&&n.addRule(ac,Y):n&&typeof j.createTextNode!=D&&n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(m){var Y=X?"visible":"hidden";J&&c(Z)?c(Z).style.visibility=Y:v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/,X=null!=Z.exec(Y);return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}{var l,Q,E,B,n,G,D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=!1,U=[h],o=[],N=[],I=[],J=!1,a=!1,m=!0,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=/win/.test(Y?Y:ah),ac=/mac/.test(Y?Y:ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,X=!1,ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r)ab=t.plugins[S].description,!ab||typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin||(T=!0,X=!1,ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10),ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10),ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof O[["Active"].concat("Object").join("X")]!=D)try{var ad=new(window[["Active"].concat("Object").join("X")])(W);ad&&(ab=ad.GetVariable("$version"),ab&&(X=!0,ab=ab.split(" ")[1].split(","),ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]))}catch(Z){}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}();!function(){M.w3&&((typeof j.readyState!=D&&"complete"==j.readyState||typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))&&f(),J||(typeof j.addEventListener!=D&&j.addEventListener("DOMContentLoaded",f,!1),M.ie&&M.win&&(j.attachEvent(x,function(){"complete"==j.readyState&&(j.detachEvent(x,arguments.callee),f())}),O==top&&!function(){if(!J){try{j.documentElement.doScroll("left")}catch(X){return void setTimeout(arguments.callee,0)}f()}}()),M.wk&&!function(){return J?void 0:/loaded|complete/.test(j.readyState)?void f():void setTimeout(arguments.callee,0)}(),s(f)))}(),function(){M.ie&&M.win&&window.attachEvent("onunload",function(){for(var ac=I.length,ab=0;ac>ab;ab++)I[ab][0].detachEvent(I[ab][1],I[ab][2]);for(var Z=N.length,aa=0;Z>aa;aa++)y(N[aa]);for(var Y in M)M[Y]=null;M=null;for(var X in swfobject)swfobject[X]=null;swfobject=null})}()}return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab,Y.swfVersion=X,Y.expressInstall=aa,Y.callbackFn=Z,o[o.length]=Y,w(ab,!1)}else Z&&Z({success:!1,id:ab})},getObjectById:function(X){return M.w3?z(X):void 0},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:!1,id:ah};M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y?(w(ah,!1),K(function(){ae+="",ag+="";var aj={};if(af&&typeof af===r)for(var al in af)aj[al]=af[al];aj.data=ab,aj.width=ae,aj.height=ag;var am={};if(ad&&typeof ad===r)for(var ak in ad)am[ak]=ad[ak];if(Z&&typeof Z===r)for(var ai in Z)typeof am.flashvars!=D?am.flashvars+="&"+ai+"="+Z[ai]:am.flashvars=ai+"="+Z[ai];if(F(Y)){var an=u(aj,am,ah);aj.id==ah&&w(ah,!0),X.success=!0,X.ref=an}else{if(aa&&A())return aj.data=aa,void P(aj,am,ah,ac);w(ah,!0)}ac&&ac(X)})):ac&&ac(X)},switchOffAutoHideShow:function(){m=!1},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){return M.w3?u(Z,Y,X):void 0},showExpressInstall:function(Z,aa,X,Y){M.w3&&A()&&P(Z,aa,X,Y)},removeSWF:function(X){M.w3&&y(X)},createCSS:function(aa,Z,Y,X){M.w3&&v(aa,Z,Y,X)},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)&&(Z=Z.split("?")[1]),null==aa)return L(Z);for(var Y=Z.split("&"),X=0;X<Y.length;X++)if(Y[X].substring(0,Y[X].indexOf("="))==aa)return L(Y[X].substring(Y[X].indexOf("=")+1))}return""},expressInstallCallback:function(){if(a){var X=c(R);X&&l&&(X.parentNode.replaceChild(l,X),Q&&(w(Q,!0),M.ie&&M.win&&(l.style.display="block")),E&&E(B)),a=!1}}}}();!function(){if("undefined"!=typeof window&&!window.WebSocket){var console=window.console;if(console&&console.log&&console.error||(console={log:function(){},error:function(){}}),!swfobject.hasFlashPlayerVersion("10.0.0"))return void console.error("Flash Player >= 10.0.0 is required.");"file:"==location.protocol&&console.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(url,protocols,proxyHost,proxyPort,headers){var self=this;self.__id=WebSocket.__nextId++,WebSocket.__instances[self.__id]=self,self.readyState=WebSocket.CONNECTING,self.bufferedAmount=0,self.__events={},protocols?"string"==typeof protocols&&(protocols=[protocols]):protocols=[],setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(self.__id,url,protocols,proxyHost||null,proxyPort||0,headers||null)})},0)},WebSocket.prototype.send=function(data){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";var result=WebSocket.__flash.send(this.__id,encodeURIComponent(data));return 0>result?!0:(this.bufferedAmount+=result,!1)},WebSocket.prototype.close=function(){this.readyState!=WebSocket.CLOSED&&this.readyState!=WebSocket.CLOSING&&(this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id))},WebSocket.prototype.addEventListener=function(type,listener){type in this.__events||(this.__events[type]=[]),this.__events[type].push(listener)},WebSocket.prototype.removeEventListener=function(type,listener){if(type in this.__events)for(var events=this.__events[type],i=events.length-1;i>=0;--i)if(events[i]===listener){events.splice(i,1);break}},WebSocket.prototype.dispatchEvent=function(event){for(var events=this.__events[event.type]||[],i=0;i<events.length;++i)events[i](event);var handler=this["on"+event.type];handler&&handler(event)},WebSocket.prototype.__handleEvent=function(flashEvent){"readyState"in flashEvent&&(this.readyState=flashEvent.readyState),"protocol"in flashEvent&&(this.protocol=flashEvent.protocol);var jsEvent;if("open"==flashEvent.type||"error"==flashEvent.type)jsEvent=this.__createSimpleEvent(flashEvent.type);else if("close"==flashEvent.type)jsEvent=this.__createSimpleEvent("close");else{if("message"!=flashEvent.type)throw"unknown event type: "+flashEvent.type;var data=decodeURIComponent(flashEvent.message);jsEvent=this.__createMessageEvent("message",data)}this.dispatchEvent(jsEvent)},WebSocket.prototype.__createSimpleEvent=function(type){if(document.createEvent&&window.Event){var event=document.createEvent("Event");return event.initEvent(type,!1,!1),event}return{type:type,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(type,data){if(document.createEvent&&window.MessageEvent&&!window.opera){var event=document.createEvent("MessageEvent");return event.initMessageEvent("message",!1,!1,data,null,null,window,null),event}return{type:type,data:data,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(url){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(url)})},WebSocket.__initialize=function(){if(!WebSocket.__flash){if(WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),!window.WEB_SOCKET_SWF_LOCATION)return void console.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");var container=document.createElement("div");container.id="webSocketContainer",container.style.position="absolute",WebSocket.__isFlashLite()?(container.style.left="0px",container.style.top="0px"):(container.style.left="-100px",container.style.top="-100px");var holder=document.createElement("div");holder.id="webSocketFlash",container.appendChild(holder),document.body.appendChild(container),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(e){e.success||console.error("[WebSocket] swfobject.embedSWF failed")})}},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var i=0;i<WebSocket.__tasks.length;++i)WebSocket.__tasks[i]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){return setTimeout(function(){try{for(var events=WebSocket.__flash.receiveEvents(),i=0;i<events.length;++i)WebSocket.__instances[events[i].webSocketId].__handleEvent(events[i])}catch(e){console.error(e)}},0),!0},WebSocket.__log=function(message){console.log(decodeURIComponent(message))},WebSocket.__error=function(message){console.error(decodeURIComponent(message))},WebSocket.__addTask=function(task){WebSocket.__flash?task():WebSocket.__tasks.push(task)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var mimeType=window.navigator.mimeTypes["application/x-shockwave-flash"];return mimeType&&mimeType.enabledPlugin&&mimeType.enabledPlugin.filename?mimeType.enabledPlugin.filename.match(/flashlite/i)?!0:!1:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))}}(),function(exports,io,global){function XHR(socket){socket&&(io.Transport.apply(this,arguments),this.sendBuffer=[])}function empty(){}exports.XHR=XHR,io.util.inherit(XHR,io.Transport),XHR.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},XHR.prototype.payload=function(payload){for(var msgs=[],i=0,l=payload.length;l>i;i++)msgs.push(io.parser.encodePacket(payload[i]));this.send(io.parser.encodePayload(msgs))},XHR.prototype.send=function(data){return this.post(data),this},XHR.prototype.post=function(data){function stateChange(){4==this.readyState&&(this.onreadystatechange=empty,self.posting=!1,200==this.status?self.socket.setBuffer(!1):self.onClose())}function onload(){this.onload=empty,self.socket.setBuffer(!1)}var self=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),global.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=onload:this.sendXHR.onreadystatechange=stateChange,this.sendXHR.send(data)},XHR.prototype.close=function(){return this.onClose(),this},XHR.prototype.request=function(method){var req=io.util.request(this.socket.isXDomain()),query=io.util.query(this.socket.options.query,"t="+ +new Date);if(req.open(method||"GET",this.prepareUrl()+query,!0),"POST"==method)try{req.setRequestHeader?req.setRequestHeader("Content-type","text/plain;charset=UTF-8"):req.contentType="text/plain"}catch(e){}return req},XHR.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},XHR.check=function(socket,xdomain){try{var request=io.util.request(xdomain),usesXDomReq=global.XDomainRequest&&request instanceof XDomainRequest,socketProtocol=socket&&socket.options&&socket.options.secure?"https:":"http:",isXProtocol=global.location&&socketProtocol!=global.location.protocol;if(request&&(!usesXDomReq||!isXProtocol))return!0}catch(e){}return!1},XHR.xdomainCheck=function(socket){return XHR.check(socket,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(exports,io){function HTMLFile(){io.Transport.XHR.apply(this,arguments)}exports.htmlfile=HTMLFile,io.util.inherit(HTMLFile,io.Transport.XHR),HTMLFile.prototype.name="htmlfile",HTMLFile.prototype.get=function(){this.doc=new(window[["Active"].concat("Object").join("X")])("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close(),this.doc.parentWindow.s=this;var iframeC=this.doc.createElement("div");iframeC.className="socketio",this.doc.body.appendChild(iframeC),this.iframe=this.doc.createElement("iframe"),iframeC.appendChild(this.iframe);var self=this,query=io.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+query,io.util.on(window,"unload",function(){self.destroy()})},HTMLFile.prototype._=function(data,doc){data=data.replace(/\\\//g,"/"),this.onData(data);try{var script=doc.getElementsByTagName("script")[0];script.parentNode.removeChild(script)}catch(e){}},HTMLFile.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(e){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},HTMLFile.prototype.close=function(){return this.destroy(),io.Transport.XHR.prototype.close.call(this)},HTMLFile.check=function(socket){if("undefined"!=typeof window&&["Active"].concat("Object").join("X")in window)try{var a=new(window[["Active"].concat("Object").join("X")])("htmlfile");return a&&io.Transport.XHR.check(socket)}catch(e){}return!1},HTMLFile.xdomainCheck=function(){return!1},io.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,io,global){function XHRPolling(){io.Transport.XHR.apply(this,arguments)}function empty(){}exports["xhr-polling"]=XHRPolling,io.util.inherit(XHRPolling,io.Transport.XHR),io.util.merge(XHRPolling,io.Transport.XHR),XHRPolling.prototype.name="xhr-polling",XHRPolling.prototype.heartbeats=function(){return!1},XHRPolling.prototype.open=function(){var self=this;return io.Transport.XHR.prototype.open.call(self),!1},XHRPolling.prototype.get=function(){function stateChange(){4==this.readyState&&(this.onreadystatechange=empty,200==this.status?(self.onData(this.responseText),self.get()):self.onClose())}function onload(){this.onload=empty,this.onerror=empty,self.retryCounter=1,self.onData(this.responseText),self.get()}function onerror(){self.retryCounter++,!self.retryCounter||self.retryCounter>3?self.onClose():self.get()}if(this.isOpen){var self=this;this.xhr=this.request(),global.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=onload,this.xhr.onerror=onerror):this.xhr.onreadystatechange=stateChange,this.xhr.send(null)}},XHRPolling.prototype.onClose=function(){if(io.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=empty;try{this.xhr.abort()}catch(e){}this.xhr=null}},XHRPolling.prototype.ready=function(socket,fn){var self=this;io.util.defer(function(){fn.call(self)})},io.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(exports,io,global){function JSONPPolling(){io.Transport["xhr-polling"].apply(this,arguments),this.index=io.j.length;var self=this;io.j.push(function(msg){self._(msg)})}var indicator=global.document&&"MozAppearance"in global.document.documentElement.style;
exports["jsonp-polling"]=JSONPPolling,io.util.inherit(JSONPPolling,io.Transport["xhr-polling"]),JSONPPolling.prototype.name="jsonp-polling",JSONPPolling.prototype.post=function(data){function complete(){initIframe(),self.socket.setBuffer(!1)}function initIframe(){self.iframe&&self.form.removeChild(self.iframe);try{iframe=document.createElement('<iframe name="'+self.iframeId+'">')}catch(e){iframe=document.createElement("iframe"),iframe.name=self.iframeId}iframe.id=self.iframeId,self.form.appendChild(iframe),self.iframe=iframe}var self=this,query=io.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var iframe,form=document.createElement("form"),area=document.createElement("textarea"),id=this.iframeId="socketio_iframe_"+this.index;form.className="socketio",form.style.position="absolute",form.style.top="0px",form.style.left="0px",form.style.display="none",form.target=id,form.method="POST",form.setAttribute("accept-charset","utf-8"),area.name="d",form.appendChild(area),document.body.appendChild(form),this.form=form,this.area=area}this.form.action=this.prepareUrl()+query,initIframe(),this.area.value=io.JSON.stringify(data);try{this.form.submit()}catch(e){}this.iframe.attachEvent?iframe.onreadystatechange=function(){"complete"==self.iframe.readyState&&complete()}:this.iframe.onload=complete,this.socket.setBuffer(!0)},JSONPPolling.prototype.get=function(){var self=this,script=document.createElement("script"),query=io.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),script.async=!0,script.src=this.prepareUrl()+query,script.onerror=function(){self.onClose()};var insertAt=document.getElementsByTagName("script")[0];insertAt.parentNode.insertBefore(script,insertAt),this.script=script,indicator&&setTimeout(function(){var iframe=document.createElement("iframe");document.body.appendChild(iframe),document.body.removeChild(iframe)},100)},JSONPPolling.prototype._=function(msg){return this.onData(msg),this.isOpen&&this.get(),this},JSONPPolling.prototype.ready=function(socket,fn){var self=this;return indicator?void io.util.load(function(){fn.call(self)}):fn.call(this)},JSONPPolling.check=function(){return"document"in global},JSONPPolling.xdomainCheck=function(){return!0},io.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),"function"==typeof define&&define.amd&&define("socketio",[],function(){return io})}(),define("robots/services/RobotInterfaceIO",["require","angular","socketio"],function(require){var angular=require("angular"),io=require("socketio"),Sensor=function(){return{id:null,name:null,value:null}},Servo=function(){return{id:null,actual:{position:null,poseable:null},poseable:null,position:null,jointName:null}},RobotInterface=function($rootScope){var robotSocket=io.connect("/Robot/Interface",{resource:"api/socket.io"}),saving=!1,delayedSave=null,connected=!1,robotId=null,components={servos:{},sensors:{},id:null,timestamp:null},on=function(eventName,callback){robotSocket.on(eventName,function(){var args=arguments;$rootScope.$apply(function(){var json=args[0],obj=angular.fromJson(json);callback.apply(robotSocket,[obj])})})},emit=function(eventName,data,callback){robotSocket.emit(eventName,data,function(){var args=arguments;$rootScope.$apply(function(){if(callback){var json=args[0],obj=angular.fromJson(json);callback.apply(robotSocket,[obj])}})})},sendChanges=function(newValue,oldValue){if(null!==robotId&&connected){var servos=[];for(var servoName in newValue){var servo=newValue[servoName];(void 0===oldValue||void 0===oldValue[servoName]||servo.position!=oldValue[servoName].position||servo.poseable!=oldValue[servoName].poseable)&&servos.push({id:servo.id,position:servo.position,poseable:servo.poseable,jointName:servoName})}servos.length>0&&save({id:robotId,servos:servos})}},save=function(data){saving?delayedSave=data:(saving=!0,emit("setData",data,function(){if(saving=!1,null!==delayedSave){var next=delayedSave;delayedSave=null,save(next)}}))};on("getData",function(dataPackage){if(connected){console.log(dataPackage);for(var servoIndex=0;servoIndex<dataPackage.servos.length;servoIndex++){var servo=dataPackage.servos[servoIndex];void 0===components.servos[servo.jointName]&&(components.servos[servo.jointName]=new Servo,components.servos[servo.jointName].jointName=servo.jointName),components.servos[servo.jointName].id=servo.id,components.servos[servo.jointName].actual.position=servo.position,components.servos[servo.jointName].actual.poseable=servo.poseable}for(var sensorIndex=0;sensorIndex<dataPackage.sensors.length;sensorIndex++){var sensor=dataPackage.sensors[sensorIndex];void 0===components.sensors[sensor.name]&&(components.sensors[sensor.name]=new Sensor,components.sensors[sensor.name].name=sensor.name),components.sensors[sensor.name].id=sensor.id,components.sensors[sensor.name].value=sensor.value}}}),$rootScope.$watch(function(){return components.servos},sendChanges,!0),this.setRobot=function(robot){if(void 0===robot||null===robot&&null!==robotId)return this.setConnected(!1),void(robotId=null);if(robot.id!=robotId){var connected=this.connected;this.setConnected(!1),robotId=robot.id,this.setConnected(connected)}},this.setConnected=function(connectedState){connected!=connectedState&&(connected=connectedState,robotSocket.emit("configure",{robotId:robotId,connect:connected}))},this.getConnected=function(){return connected},this.getSensor=function(sensorName){return void 0===sensorName?null:(void 0===components.sensors[sensorName]&&(components.sensors[sensorName]=new Sensor,components.sensors[sensorName].name=sensorName),components.sensors[sensorName])},this.getServo=function(componentName){return void 0===componentName?null:(void 0===components.servos[componentName]&&(components.servos[componentName]=new Servo,components.servos[componentName].jointName=componentName),components.servos[componentName])}};return["$rootScope",RobotInterface]}),define("robots/services/interfaceServices",["require","angular","./RobotInterfaceIO"],function(require){{var angular=require("angular"),RobotInterface=require("./RobotInterfaceIO"),moduleName="kasparGUI.robot.interfaceServices",dependancies=[];angular.module(moduleName,dependancies).service("robotInterface",RobotInterface)}return moduleName}),define("common/filters/ExceptFilter",["require"],function(){var ExceptFilter=function(){return function(inputList,objList,property){var ret=[];if(void 0===objList)return inputList;if(property="undefined"!=typeof property?property:"id","[object Array]"!=Object.prototype.toString.call(objList)&&(objList=[objList]),void 0!==inputList)for(var i=0;i<inputList.length;i++){for(var eq=!1,j=0;j<objList.length&&!(eq=""===property?objList[j]==inputList[i]:objList[j][property]==inputList[i][property]);j++);eq||ret.push(inputList[i])}return ret}};return ExceptFilter}),define("common/filters/InterpolateFilter",["require"],function(){var InterpolateFilter=function(version){return function(text){return String(text).replace(/\%VERSION\%/gm,version)}};return["version",InterpolateFilter]}),define("common/filters/IntersectFilter",["require"],function(){var IntersectFilter=function(){return function(inputList,inputProp,objList,objProp){var ret=[];if(void 0===objList)return ret;"[object Array]"!=Object.prototype.toString.call(objList)&&(objList=[objList]);for(var i=0;i<inputList.length;i++)for(var j=0;j<objList.length;j++){var eq=!1;if(eq=""===objProp&&""===inputProp?objList[j]==inputList[i]:""===objProp&&""!==inputProp?objList[j]===inputList[i][inputProp]:""!==objProp&&""===inputProp?objList[j][objProp]==inputList[i]:objList[j][objProp]==inputList[i][inputProp]){ret.push(inputList[i]);break}}return ret}};return IntersectFilter}),define("common/filters",["require","angular","./filters/ExceptFilter","./filters/InterpolateFilter","./filters/IntersectFilter"],function(require){{var angular=require("angular"),ExceptFilter=require("./filters/ExceptFilter"),InterpolateFilter=require("./filters/InterpolateFilter"),IntersectFilter=require("./filters/IntersectFilter"),moduleName="kasparGUI.common.filters",dependancies=[];angular.module(moduleName,dependancies).filter("except",ExceptFilter).filter("interpolate",InterpolateFilter).filter("intersect",IntersectFilter)}return moduleName}),define("common/models/Menu",["require"],function(){var Menu=function(modelBuilder){return modelBuilder.getModel("Menu")};return["modelBuilder",Menu]}),define("common/models/Setting",["require"],function(){var Setting=function(modelBuilder){var _service=modelBuilder.getModel("Setting");return _service};return["modelBuilder",Setting]}),define("common/models",["require","angular","common/services/modelServices","./models/Menu","./models/Setting"],function(require){{var angular=require("angular"),angularResource=require("common/services/modelServices"),Menu=require("./models/Menu"),Setting=require("./models/Setting"),moduleName="kasparGUI.common.models",dependancies=[angularResource];angular.module(moduleName,dependancies).factory("Menu",Menu).factory("Setting",Setting)}return moduleName}),define("robots/models/Robot",["require"],function(){var Robot=function(modelBuilder){var _service=modelBuilder.getModel("Robot");return _service};return["modelBuilder",Robot]}),define("robots/models/RobotInterface",["require"],function(){var RobotInterface=function(modelBuilder){var _service=modelBuilder.getModel("RobotInterface",{},{get:{method:"GET",cache:!1}},"Robot/:id/Interface");return _service};return["modelBuilder",RobotInterface]}),define("robots/models/RobotModel",["require"],function(){var RobotModel=function(modelBuilder){var _service=modelBuilder.getModel("RobotModel");return _service};return["modelBuilder",RobotModel]}),define("robots/models/Sensor",["require"],function(){var Sensor=function(modelBuilder){var resource=modelBuilder.getModel("Sensor");return resource};return["modelBuilder",Sensor]}),define("robots/models/SensorGroup",["require"],function(){var SensorGroup=function(modelBuilder){var _service=modelBuilder.getModel("SensorGroup");return _service};return["modelBuilder",SensorGroup]}),define("robots/models/SensorModel",["require"],function(){var SensorModel=function(modelBuilder){var _service=modelBuilder.getModel("SensorModel");return _service};return["modelBuilder",SensorModel]}),define("robots/models/SensorValueType",["require"],function(){var SensorValueType=function(modelBuilder){var resource=modelBuilder.getModel("SensorValueType");return resource};return["modelBuilder",SensorValueType]}),define("robots/models/Servo",["require"],function(){var Servo=function(modelBuilder){var _service=modelBuilder.getModel("Servo");return _service};return["modelBuilder",Servo]}),define("robots/models/ServoConfig",["require"],function(){var ServoConfig=function(modelBuilder){var _service=modelBuilder.getModel("ServoConfig");return _service};return["modelBuilder",ServoConfig]}),define("robots/models/ServoGroup",["require"],function(){var ServoGroup=function(modelBuilder){var _service=modelBuilder.getModel("ServoGroup");return _service};return["modelBuilder",ServoGroup]}),define("robots/models/ServoInterface",["require"],function(){var ServoInterface=function(modelBuilder){var _service=modelBuilder.getModel("ServoInterface");return _service};return["modelBuilder",ServoInterface]}),define("robots/models/ServoModel",["require"],function(){var ServoModel=function(modelBuilder){var _service=modelBuilder.getModel("ServoModel");return _service};return["modelBuilder",ServoModel]}),define("robots/models",["require","angular","angularResource","./models/Robot","./models/RobotInterface","./models/RobotModel","./models/Sensor","./models/SensorGroup","./models/SensorModel","./models/SensorValueType","./models/Servo","./models/ServoConfig","./models/ServoGroup","./models/ServoInterface","./models/ServoModel"],function(require){{var angular=require("angular"),angularResource=require("angularResource"),Robot=require("./models/Robot"),RobotInterface=require("./models/RobotInterface"),RobotModel=require("./models/RobotModel"),Sensor=require("./models/Sensor"),SensorGroup=require("./models/SensorGroup"),SensorModel=require("./models/SensorModel"),SensorValueType=require("./models/SensorValueType"),Servo=require("./models/Servo"),ServoConfig=require("./models/ServoConfig"),ServoGroup=require("./models/ServoGroup"),ServoInterface=require("./models/ServoInterface"),ServoModel=require("./models/ServoModel"),moduleName="kasparGUI.robots.models",dependancies=[angularResource];angular.module(moduleName,dependancies).factory("Robot",Robot).factory("RobotInterface",RobotInterface).factory("RobotModel",RobotModel).factory("Sensor",Sensor).factory("SensorGroup",SensorGroup).factory("SensorModel",SensorModel).factory("Servo",Servo).factory("ServoConfig",ServoConfig).factory("ServoGroup",ServoGroup).factory("SensorValueType",SensorValueType).factory("ServoInterface",ServoInterface).factory("ServoModel",ServoModel)}return moduleName}),define("text!robots/directives/robotEditor.tpl.html",[],function(){return'<div>\r\n	<form\r\n		novalidate\r\n		name="robotForm"\r\n		model="robot">\r\n		<div class="input-group">\r\n			<span class="input-group-addon inputLabel">{{language[\'robot.name\']}}</span>\r\n			<input\r\n				type="text"\r\n				name="name"\r\n				class="form-control"\r\n				placeholder="Name"\r\n				saveable\r\n				ng-model="robot.name"\r\n				required>\r\n		</div>\r\n		<div class="input-group">\r\n			<span class="input-group-addon inputLabel">{{language[\'robot.model\']}}</span>\r\n			<select\r\n				ng-disabled="robotForm.model.$pristine && robotForm.model.$valid"\r\n				name="model"\r\n				class="selectpicker form-control"\r\n				ng-model="robot.model_id"\r\n				ng-options="model.id as model.name for model in models | orderBy:\'model.name\'"\r\n				saveable\r\n				required>\r\n				<option value="">{{language[\'robot.model.select.prompt\']}}</option>\r\n			</select>\r\n		</div>\r\n		<div class="input-group">\r\n			<span class="input-group-addon inputLabel">{{language[\'robot.version\']}}</span>\r\n			<input\r\n				type="text"\r\n				name="version"\r\n				class="form-control"\r\n				placeholder="Version"\r\n				ng-disabled="robotForm.model.$pristine && robotForm.model.$valid"\r\n				saveable\r\n				ng-model="robot.version"\r\n				required>\r\n		</div>\r\n	</form>\r\n	<hr />\r\n	<tabset ng-show="robot != null"> <tab heading="Servo Details">\r\n	<view-robot robot="robot"></view-robot> </tab> <tab\r\n		heading="Servo Calibration"> <calibrate-robot robot="robot"></calibrate-robot>\r\n	</tab></tabset>\r\n</div>'}),define("robots/directives/RobotEditor",["require","angular","robots/models","text!./robotEditor.tpl.html"],function(require){require("angular");require("robots/models");var template=require("text!./robotEditor.tpl.html"),RobotEditor=function(RobotModel,language){return{template:template,restrict:"E",scope:{robot:"="},controller:function($scope){$scope.language=language.getText(),$scope.models=RobotModel.query()}}};return["RobotModel","language",RobotEditor]}),define("text!robots/directives/batteryLevel.tpl.html",[],function(){return'<div class="battery">\r\n	<div class="icon col-lg-1">&nbsp;</div>\r\n	<progressbar\r\n		max="max"\r\n		value="battery.value"\r\n		type="{{type}}"\r\n		class="meter col-lg-11">{{battery.value || \'Unknown\'}}</progressbar>\r\n</div>'}),define("robots/directives/BatteryLevel",["require","angular","robots/services/interfaceServices","text!./batteryLevel.tpl.html"],function(require){require("angular");require("robots/services/interfaceServices");var template=require("text!./batteryLevel.tpl.html"),BatteryLevel=function(robotInterface){return{template:template,restrict:"E",scope:{},controller:function($scope){$scope.battery=robotInterface.getSensor("BATTERY"),$scope.$watch("battery.value",function(value){null===value||0>value?$scope.type="unknown":value>25?$scope.type="success":value>10?$scope.type="warning":value>=0&&($scope.type="danger")})}}};return["robotInterface","$timeout",BatteryLevel]}),define("text!robots/directives/robotInterface.tpl.html",[],function(){return'\r\n<div class="col-lg-12">\r\n	<div class="row">\r\n		<div class="col-lg-12 input-group">\r\n			<span class="input-group-addon inputLabel">\r\n				<span class="hidden-xs">{{language[\'robot.interface.robot\']}}</span>\r\n				<span class="visible-xs">{{language[\'robot.interface.robot.short\']}}</span>\r\n			</span>\r\n			<select\r\n				ng-disabled="connected || configured || !robots"\r\n				class="selectpicker form-control"\r\n				ng-model="robot"\r\n				ng-options="(item.name + \' (\' + item.version + \')\' ) for item in robots | orderBy:\'name\'">\r\n				<option value="">{{language[\'robot.interface.robot.select.prompt\']}}</option>\r\n			</select>\r\n			<span class="input-group-btn" ng-if="showConnect">\r\n				<button\r\n					class="btn btn-default"\r\n					type="button"\r\n					ng-disabled="!robot"\r\n					ng-hide="connected"\r\n					ng-click="setConnected(true)">{{language[\'robot.interface.connect\']}}</button>\r\n				<button\r\n					class="btn btn-default"\r\n					type="button"\r\n					ng-show="connected"\r\n					ng-click="setConnected(false)">{{language[\'robot.interface.disconnect\']}}</button>\r\n			</span>\r\n		</div>\r\n	</div>\r\n	<!-- 		<div class="btn-group row"> -->\r\n	<!-- 			<button class="btn btn-default" ng-disabled="true" type="button" ng-click="advancedPositioning(selected)">Advanced Positioning</button> -->\r\n	<!-- 			<button class="btn btn-default" ng-disabled="true" type="button" ng-click="setPositioning(selected, true)" ng-hide="selected.poseEnable">Enable Positioning</button> -->\r\n	<!-- 			<button class="btn btn-default" ng-disabled="true" type="button" ng-click="setPositioning(selected, false)" ng-show="selected.poseEnabled">Disable Positioning</button> -->\r\n	<!-- 			<button class="btn btn-default" ng-disabled="true" type="button" ng-click="getCurrentPose(jointPositionsRaw)">Record Current Position</button> -->\r\n	<!-- 		</div> -->\r\n</div>\r\n'}),define("robots/directives/RobotInterface",["require","angular","common/models","robots/models","robots/services/interfaceServices","text!./robotInterface.tpl.html"],function(require){require("angular");require("common/models"),require("robots/models"),require("robots/services/interfaceServices");var template=require("text!./robotInterface.tpl.html"),RobotInterface=function($q,Robot,robotInterface,Setting,language){return{template:template,restrict:"E",scope:{robot:"=",connected:"=?",showConnect:"=?"},controller:function($scope){$scope.language=language.getText(),void 0===$scope.connected&&($scope.connected=!1),void 0===$scope.showConnect&&($scope.showConnect=!1);var settings=Setting.query({key:"robot"});$scope.robots=Robot.query(),$scope.robots.$promise.then(function(){settings.$promise.then(function(){if(settings.length>0)for(var i=0;i<$scope.robots.length;i++)if($scope.robots[i].name==settings[0].value){$scope.robot=$scope.robots[i],$scope.configured=!0;break}})}),$scope.$watch("robot",function(robot){robotInterface.setRobot(robot),$scope.connected=robotInterface.getConnected()}),$scope.setConnected=function(state){robotInterface.setConnected(state?state:!1),$scope.connected=state}}}};return["$q","Robot","robotInterface","Setting","language",RobotInterface]}),define("text!robots/directives/calibrateRobot.tpl.html",[],function(){return"<div>Calibrate individual joints or entire robot</div>\r\n<div>\r\n	<strong>TODO</strong>\r\n</div>"}),define("robots/directives/CalibrateRobot",["require","angular","robots/models","text!./calibrateRobot.tpl.html"],function(require){require("angular");require("robots/models");var template=require("text!./calibrateRobot.tpl.html"),ViewRobot=function(ServoConfig,ServoGroup,Servo,language){return{template:template,restrict:"E",scope:{robot:"="},controller:function($scope){$scope.language=language.getText(),$scope.$watch("robot",function(robot){void 0!==robot&&($scope.servos=robot.servos)})}}};return["ServoConfig","ServoGroup","Servo","language",ViewRobot]}),define("text!robots/directives/viewRobot.tpl.html",[],function(){return'\r\n<accordion close-others="true"> <accordion-group\r\n	is-open="configsOpen"> <accordion-heading>{{language[\'robot.view.servoModel.label\']}}<i\r\n	class="pull-right glyphicon"\r\n	ng-class="{\'glyphicon-chevron-down\': configsOpen, \'glyphicon-chevron-right\': !configsOpen}"></i>\r\n</accordion-heading>\r\n<div\r\n	ng-repeat="item in servoConfigs"\r\n	class="col-lg-6 col-sm-12">\r\n	<strong>{{item.model.name}}</strong>\r\n	<span class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servoModel.id\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Not Set"\r\n			ng-model="item.model.id"\r\n			ng-disabled="true">\r\n	</span>\r\n	<span class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servoModel.port\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Not Set"\r\n			ng-model="item.port"\r\n			ng-disabled="true">\r\n	</span>\r\n	<span class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servoModel.portSpeed\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Not Set"\r\n			ng-model="item.portSpeed"\r\n			ng-disabled="true">\r\n	</span>\r\n	<span class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servoModel.position.scale\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Not Set"\r\n			ng-model="item.model.positionScale"\r\n			ng-disabled="true">\r\n	</span>\r\n	<span class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servoModel.position.offset\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Not Set"\r\n			ng-model="item.model.positionOffset"\r\n			ng-disabled="true">\r\n	</span>\r\n	<span class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servoModel.position.min\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Not Set"\r\n			ng-model="item.model.minPosition"\r\n			ng-disabled="true">\r\n	</span>\r\n	<span class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servoModel.position.max\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Not Set"\r\n			ng-model="item.model.maxPosition"\r\n			ng-disabled="true">\r\n	</span>\r\n	<span class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servoModel.position.default\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Not Set"\r\n			ng-model="item.model.defaultPosition"\r\n			ng-disabled="true">\r\n	</span>\r\n	<span class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servoModel.speed.scale\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Not Set"\r\n			ng-model="item.model.speedScale"\r\n			ng-disabled="true">\r\n	</span>\r\n	<span class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servoModel.speed.min\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Not Set"\r\n			ng-model="item.model.minSpeed"\r\n			ng-disabled="true">\r\n	</span>\r\n	<span class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servoModel.speed.max\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Not Set"\r\n			ng-model="item.model.maxSpeed"\r\n			ng-disabled="true">\r\n	</span>\r\n	<span class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servoModel.speed.default\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Not Set"\r\n			ng-model="item.model.defaultSpeed"\r\n			ng-disabled="true">\r\n	</span>\r\n	<span class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servoModel.poseable\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Not Set"\r\n			ng-model="item.model.poseable"\r\n			ng-disabled="true">\r\n	</span>\r\n	<span\r\n		class="input-group"\r\n		ng-if="item.extraData">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servoModel.otherSettings\']}}</span>\r\n		<span class="list-group form-control">\r\n			<span\r\n				class="list-group-item"\r\n				ng-repeat="(key, value) in item.extraData">\r\n				<span class="input-group">\r\n					<span class="input-group-addon inputLabel">{{key}}</span>\r\n					<input\r\n						type="text"\r\n						class="form-control"\r\n						placeholder="Not Set"\r\n						ng-model="value"\r\n						ng-disabled="true">\r\n				</span>\r\n			</span>\r\n		</span>\r\n	</span>\r\n</div>\r\n</accordion-group> <accordion-group is-open="groupsOpen"> <accordion-heading>{{language[\'robot.view.servoGroups.label\']}} <i\r\n	class="pull-right glyphicon"\r\n	ng-class="{\'glyphicon-chevron-down\': groupsOpen, \'glyphicon-chevron-right\': !groupsOpen}"></i>\r\n</accordion-heading>\r\n<div\r\n	ng-repeat="item in servoGroups"\r\n	class="col-lg-4 col-md-6 col-sm-12">\r\n	<strong>{{item.name}}</strong>\r\n	<span\r\n		class="input-group"\r\n		ng-repeat="servo in item.servos">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servoGroups.servoName\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Not Set"\r\n			ng-model="servo.jointName"\r\n			ng-disabled="true">\r\n	</span>\r\n</div>\r\n</accordion-group> <accordion-group is-open="servosOpen"> <accordion-heading>{{language[\'robot.view.servos.label\']}}\r\n<i\r\n	class="pull-right glyphicon"\r\n	ng-class="{\'glyphicon-chevron-down\': servosOpen, \'glyphicon-chevron-right\': !servosOpen}"></i>\r\n</accordion-heading>\r\n<div\r\n	ng-repeat="item in servos"\r\n	class="col-lg-4 col-md-6 col-sm-12">\r\n	<strong>{{item.jointName}}</strong>\r\n	<span class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servos.model.id\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Not Set"\r\n			ng-model="item.model_id"\r\n			ng-disabled="true">\r\n	</span>\r\n	<span class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servos.position.min\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Inherit"\r\n			ng-model="item.minPosition"\r\n			ng-disabled="true">\r\n	</span>\r\n	<span class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servos.position.max\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Inherit"\r\n			ng-model="item.maxPosition"\r\n			ng-disabled="true">\r\n	</span>\r\n	<span class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servos.position.default\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Inherit"\r\n			ng-model="item.defaultPosition"\r\n			ng-disabled="true">\r\n	</span>\r\n	<span class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servos.speed.min\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Inherit"\r\n			ng-model="item.minSpeed"\r\n			ng-disabled="true">\r\n	</span>\r\n	<span class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servos.speed.max\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Inherit"\r\n			ng-model="item.maxSpeed"\r\n			ng-disabled="true">\r\n	</span>\r\n	<span class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servos.speed.default\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Inherit"\r\n			ng-model="item.defaultSpeed"\r\n			ng-disabled="true">\r\n	</span>\r\n	<span class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servos.poseable\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Inherit"\r\n			ng-model="item.poseable"\r\n			ng-disabled="true">\r\n	</span>\r\n	<span\r\n		class="input-group"\r\n		ng-if="item.extraData">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.view.servos.otherSettings\']}}</span>\r\n		<span class="list-group form-control">\r\n			<span\r\n				class="list-group-item"\r\n				ng-repeat="(key, value) in item.extraData">\r\n				<span class="input-group">\r\n					<span class="input-group-addon inputLabel">{{key}}</span>\r\n					<input\r\n						type="text"\r\n						class="form-control"\r\n						placeholder="Not Set"\r\n						ng-model="value"\r\n						ng-disabled="true">\r\n				</span>\r\n			</span>\r\n		</span>\r\n	</span>\r\n</div>\r\n</accordion-group> </accordion>\r\n'}),define("robots/directives/ViewRobot",["require","angular","robots/models","text!./viewRobot.tpl.html"],function(require){require("angular");require("robots/models");var template=require("text!./viewRobot.tpl.html"),ViewRobot=function(ServoConfig,ServoGroup,Servo,language){return{template:template,restrict:"E",scope:{robot:"="},controller:function($scope){$scope.language=language.getText(),$scope.groupsOpen=!1,$scope.configsOpen=!1,$scope.servosOpen=!1,$scope.$watch("robot",function(robot){void 0!==robot&&($scope.servoConfigs=ServoConfig.query({robot_id:robot.id}),$scope.servoGroups=ServoGroup.query({robot_id:robot.id}),$scope.servos=robot.servos)})}}};return["ServoConfig","ServoGroup","Servo","language",ViewRobot]}),define("robots/directives",["require","angular","common/i18n/languageServices","common/services/displayServices","robots/services/interfaceServices","common/filters","common/models","robots/models","./directives/RobotEditor","./directives/BatteryLevel","./directives/RobotInterface","./directives/CalibrateRobot","./directives/ViewRobot"],function(require){{var angular=require("angular"),languageServices=require("common/i18n/languageServices"),displayServices=require("common/services/displayServices"),interfaceServices=require("robots/services/interfaceServices"),filters=require("common/filters"),commonModels=require("common/models"),robotModels=require("robots/models"),RobotEditor=require("./directives/RobotEditor"),BatteryLevel=require("./directives/BatteryLevel"),RobotInterface=require("./directives/RobotInterface"),CalibrateRobot=require("./directives/CalibrateRobot"),ViewRobot=require("./directives/ViewRobot"),moduleName="kasparGUI.robots.directives",dependancies=[displayServices,languageServices,interfaceServices,filters,commonModels,robotModels];angular.module(moduleName,dependancies).directive("robotEditor",RobotEditor).directive("batteryLevel",BatteryLevel).directive("robotInterface",RobotInterface).directive("calibrateRobot",CalibrateRobot).directive("viewRobot",ViewRobot)}return moduleName}),define("text!actions/directives/actionEditor.tpl.html",[],function(){return'<poseaction-editor\r\n	ng-if="action.type==\'PoseAction\'"\r\n	action="action"\r\n	actions="actions"></poseaction-editor>\r\n<groupaction-editor\r\n	ng-if="action.type==\'GroupAction\'"\r\n	action="action"\r\n	actions="actions"></groupaction-editor>\r\n<soundaction-editor\r\n	ng-if="action.type==\'SoundAction\'"\r\n	action="action"\r\n	actions="actions"></soundaction-editor>\r\n<sequenceaction-editor\r\n	ng-if="action.type==\'SequenceAction\'"\r\n	action="action"\r\n	actions="actions"></sequenceaction-editor>\r\n'}),define("actions/directives/ActionEditor",["require","angular","text!./actionEditor.tpl.html"],function(require){var template=(require("angular"),require("text!./actionEditor.tpl.html")),ActionEditor=function($compile,language){return{template:template,restrict:"E",scope:{action:"=",actions:"="},controller:function($scope){$scope.language=language.getText()
}}};return["$compile","language",ActionEditor]}),define("text!actions/directives/advancedPoseEditor.tpl.html",[],function(){return'<div\r\n	class="panel panel-default"\r\n	ng-repeat="group in groups | orderBy:\'name\'">\r\n	<div class="panel-heading clearfix">\r\n		<h4 class="panel-title pull-left">{{group.name}}</h4>\r\n		<button\r\n			ng-hide="advanced"\r\n			type="button"\r\n			class="btn btn-primary btn-panel check pull-right"\r\n			ng-model="group.poseable"\r\n			btn-checkbox>{{language[\'action.pose.basic.poseable\']}}</button>\r\n	</div>\r\n	<div class="panel-body">\r\n		<div\r\n			class="col-lg-4 col-md-6 col-sm-12 col-xs-12 jointEditor"\r\n			ng-repeat="jointPosition in group.rows | orderBy:\'jointName\'">\r\n			<joint-editor\r\n				joint-names="joints"\r\n				joint-position="jointPosition"\r\n				poseable="group.poseable"\r\n				advanced="advanced"\r\n				servo-position="getPosition(jointPosition.jointName, servoPositions)"\r\n				servo="getServo(jointPosition.jointName, robot.servos)"></joint-editor>\r\n		</div>\r\n	</div>\r\n</div>'}),define("actions/directives/AdvancedPoseEditor",["require","angular","text!./advancedPoseEditor.tpl.html","actions/models","common/filters","robots/directives"],function(require){var template=(require("angular"),require("text!./advancedPoseEditor.tpl.html"));require("actions/models"),require("common/filters"),require("robots/directives");var AdvancedPoseEditor=function(JointPosition,language){return{template:template,restrict:"E",scope:{pose:"=",robot:"=",connected:"=",advanced:"=?"},controller:function($scope){$scope.language=language.getText(),void 0===$scope.advanced&&($scope.advanced=!$scope.connected),$scope.$watch("pose.jointPositions",function(jointPositions){$scope.getGroups(jointPositions,$scope.robot)}),$scope.$watch("robot.servos",function(servos){servos=servos||[],$scope.joints=[];for(var i=0;i<servos.length;i++)$scope.joints.push(servos[i].jointName);void 0!==$scope.pose&&$scope.getGroups($scope.pose.jointPositions,$scope.robot)});var processGroup=function(servoGroup,positions){var joints=[],ids=[];for(var servoIndex in servoGroup.servos){var servo=servoGroup.servos[servoIndex],posId=null;for(var posIndex in positions)if(positions[posIndex].jointName==servo.jointName){posId=positions[posIndex].id,joints.push(positions[posIndex]);break}null===posId?joints.push(new JointPosition({position:servo.defaultPosition,speed:servo.defaultSpeed,jointName:servo.jointName,pose_id:$scope.pose.id})):ids.push(posId)}var result=null;return joints.length>0&&(result=[ids,{name:servoGroup.name,rows:joints,poseable:!1}]),result};$scope.getGroups=function(jointPositions,robot){jointPositions=jointPositions||[];var posCopy=[];for(var index in jointPositions)posCopy.push(jointPositions[index]);robot?robot.getProperty("servoGroups").$promise.then(function(servoGroups){for(var res=[],servoGroupIndex=0;servoGroupIndex<servoGroups.length;servoGroupIndex++)res.push(processGroup(servoGroups[servoGroupIndex],posCopy));for(var groups=[],resultIndex=0;resultIndex<res.length;resultIndex++)if(null!==res[resultIndex]){groups.push(res[resultIndex][1]);for(var idIdx=0;idIdx<res[resultIndex][0].length;idIdx++)for(var posIdx=0;posIdx<posCopy.length;posIdx++)if(posCopy[posIdx].id==res[resultIndex][0][idIdx]){{posCopy.splice(posIdx,1)}break}}posCopy.length>0&&groups.push({name:"No Group",rows:posCopy,poseable:!1}),$scope.groups=groups}):$scope.groups=[{name:"Pose Joints",rows:posCopy,poseable:!1}]},$scope.getServo=function(jointName,servos){if(void 0!==servos){for(var servo=null,i=0;i<servos.length;i++)if(servos[i].jointName==jointName){servo=servos[i];break}return servo}},$scope.getPosition=function(jointName,positions){if(void 0!==positions){for(var position=null,i=0;i<positions.length;i++)if(positions[i].jointName==jointName){position=positions[i];break}return position}}}}};return["JointPosition","language",AdvancedPoseEditor]}),define("text!actions/directives/basicPoseEditor.tpl.html",[],function(){return"\r\n<div>\r\n	<strong>TODO</strong>\r\n	<span>Allow for editing the a pose by manually adjusting the\r\n		robots joints</span>\r\n</div>\r\n"}),define("actions/directives/BasicPoseEditor",["require","angular","text!./basicPoseEditor.tpl.html","actions/models","common/filters","robots/directives"],function(require){var template=(require("angular"),require("text!./basicPoseEditor.tpl.html"));require("actions/models"),require("common/filters"),require("robots/directives");var BasicPoseEditor=function(JointPosition,language){return{template:template,restrict:"E",scope:{pose:"=",robot:"=",connected:"="},controller:function($scope){$scope.language=language.getText()}}};return["JointPosition","language",BasicPoseEditor]}),define("text!actions/directives/groupEditor.tpl.html",[],function(){return'<form\r\n	name="groupForm"\r\n	model="group">\r\n	<div class="col-lg-12 input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'action.group.name\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Group Name"\r\n			required\r\n			saveable\r\n			name="name"\r\n			ng-model="group.name">\r\n	</div>\r\n	<div class="row">\r\n		<div class="col-lg-5">\r\n			<div class="panel panel-default">\r\n				<div class="panel-heading">{{language[\'action.group.actions.list.label\']}}</div>\r\n				<div class="input-group fill">\r\n					<select\r\n						class="selectpicker fill form-control"\r\n						multiple\r\n						ng-multiple="true"\r\n						ng-model="toAdd"\r\n						ng-options="action.name for action in actions | except:group | except:group.actions | orderBy:\'name\'">\r\n					</select>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="col-lg-2">\r\n			<div class="row">&nbsp;</div>\r\n			<div class="row">\r\n				<button\r\n					class="btn btn-default col-lg-12"\r\n					ng-disabled="!toAdd || toAdd.length == 0"\r\n					type="button"\r\n					ng-click="addActions(toAdd);toAdd=[]">{{language[\'action.group.actions.add\']}}\r\n					&rarr;</button>\r\n			</div>\r\n			<div class="row">\r\n				<button\r\n					class="btn btn-default col-lg-12"\r\n					ng-disabled="!toRemove || toRemove.length == 0"\r\n					type="button"\r\n					ng-click="removeActions(toRemove);toRemove=[]">&larr;\r\n					{{language[\'action.group.actions.remove\']}}</button>\r\n			</div>\r\n		</div>\r\n		<div class="col-lg-5">\r\n			<div class="panel panel-default">\r\n				<div class="panel-heading">{{language[\'action.group.actions.title\']}}</div>\r\n				<div class="input-group fill">\r\n					<select\r\n						class="selectpicker fill form-control"\r\n						multiple\r\n						ng-multiple="true"\r\n						ng-model="toRemove"\r\n						ng-options="action.name for action in group.actions | orderBy:\'name\'">\r\n					</select>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</form>\r\n<div class="row">\r\n	<div class="col-lg-12">\r\n		<small>{{language[\'action.group.help.short\']}}</small>\r\n	</div>\r\n</div>'}),define("actions/directives/GroupEditor",["require","angular","text!./groupEditor.tpl.html"],function(require){var template=(require("angular"),require("text!./groupEditor.tpl.html")),GroupEditor=function(language){return{template:template,restrict:"E",scope:{group:"=action",actions:"="},controller:function($scope){$scope.language=language.getText(),$scope.$watch("group",function(group){void 0!==group&&void 0===group.actions&&(group.actions=[])}),$scope.addActions=function(actions){for(var i=0;i<actions.length;i++)$scope.group.actions.push(actions[i]);$scope.group.$save()},$scope.removeActions=function(actions){for(var i=0;i<actions.length;i++)$scope.group.actions.splice($scope.group.actions.indexOf(actions[i]),1);$scope.group.$save()}}}};return["language",GroupEditor]}),define("text!actions/directives/poseEditor.tpl.html",[],function(){return'<div class="row">\r\n	<form\r\n		name="poseForm"\r\n		model="pose">\r\n		<div class="col-lg-12">\r\n			<div class="input-group">\r\n				<span class="input-group-addon inputLabel">{{language[\'action.pose.name\']}}</span>\r\n				<input\r\n					type="text"\r\n					class="form-control"\r\n					placeholder="Pose Name"\r\n					required\r\n					name="name"\r\n					saveable\r\n					ng-model="pose.name">\r\n			</div>\r\n			<div class="input-group">\r\n				<span class="input-group-addon inputLabel">\r\n					<span class="hidden-xs">{{language[\'action.pose.speedModifier\']}}</span>\r\n					<span class="visible-xs">{{language[\'action.pose.speedModifier.short\']}}</span>\r\n				</span>\r\n				<div\r\n					guislider\r\n					name="speedModifier"\r\n					saveable\r\n					floor="1"\r\n					ceiling="300"\r\n					ng-model="pose.speedModifier"></div>\r\n				<span class="input-group-addon">{{pose.speedModifier}}%</span>\r\n			</div>\r\n			<div class="input-group">\r\n				<span class="input-group-addon inputLabel">\r\n					<span class="hidden-xs">{{language[\'action.pose.minLength\']}}</span>\r\n					<span class="visible-xs">{{language[\'action.pose.minLength.short\']}}</span>\r\n				</span>\r\n				<input\r\n					type="number"\r\n					class="form-control"\r\n					min="0"\r\n					placeholder="Minimum Pose Length"\r\n					name="length"\r\n					saveable\r\n					integer\r\n					ng-model="pose.minLength">\r\n				<span class="input-group-addon">{{language[\'action.pose.minLength.units\']}}</span>\r\n			</div>\r\n		</div>\r\n	</form>\r\n</div>\r\n<hr />\r\n<robot-interface\r\n	robot="robot"\r\n	connected="connected"\r\n	show-connect="true"></robot-interface>\r\n<hr />\r\n<div class="input-group" ng-show="connected">\r\n	<div class="input-group-addon">{{language[\'action.pose.type.prompt\']}}</div>\r\n	<div class="btn-group">\r\n		<button\r\n			type="button"\r\n			class="btn btn-primary check"\r\n			ng-model="advanced"\r\n			btn-radio="false">{{language[\'action.pose.basic.label\']}}</button>\r\n		<button\r\n			type="button"\r\n			class="btn btn-primary check"\r\n			ng-model="advanced"\r\n			btn-radio="true">{{language[\'action.pose.advanced.label\']}}</button>\r\n	</div>\r\n</div>\r\n<!-- <accordion close-others="true"> <accordion-group -->\r\n<!-- 	is-open="basicopen"> <accordion-heading> -->\r\n<!-- action.pose.basic <i -->\r\n<!-- 	class="pull-right glyphicon" -->\r\n<!-- 	ng-class="{\'glyphicon-chevron-down\': basicopen, \'glyphicon-chevron-right\': !basicopen}"></i> -->\r\n<!-- </accordion-heading> <basic-pose-editor -->\r\n<!-- 	pose="pose" -->\r\n<!-- 	robot="robot"></basic-pose-editor></accordion-group> <accordion-group -->\r\n<!-- 	is-open="advancedopen"> <accordion-heading> -->\r\n<!-- action.pose.advanced <i -->\r\n<!-- 	class="pull-right glyphicon" -->\r\n<!-- 	ng-class="{\'glyphicon-chevron-down\': advancedopen, \'glyphicon-chevron-right\': !advancedopen}"></i> -->\r\n<!-- </accordion-heading> -->\r\n<advanced-pose-editor\r\n	pose="pose"\r\n	connected="connected"\r\n	advanced="advanced"\r\n	robot="robot"></advanced-pose-editor>\r\n<!-- 	 </accordion-group> </accordion> -->'}),define("actions/directives/PoseEditor",["require","angular","text!./poseEditor.tpl.html","actions/models","robots/directives"],function(require){var template=(require("angular"),require("text!./poseEditor.tpl.html"));require("actions/models"),require("robots/directives");var PoseEditor=function(JointPosition,RobotInterface,language){return{template:template,restrict:"E",scope:{pose:"=action"},controller:function($scope){$scope.language=language.getText(),$scope.connected=!1,$scope.advanced=!$scope.connected,$scope.advancedopen=!0,$scope.basicopen=!1,$scope.$watch("pose",function(pose){void 0!==pose&&void 0===pose.speedModifier&&(pose.speedModifier=100)})}}};return["JointPosition","RobotInterface","language",PoseEditor]}),define("text!actions/directives/jointEditor.tpl.html",[],function(){return'<div class="row">\r\n	<div class="col-lg-12">\r\n		<ng-form\r\n			name="jointForm"\r\n			ng-class="{\'has-info\': !jointPosition.id && jointForm.$pristine}"\r\n			model="jointPosition">\r\n		<div class="input-group">\r\n			<span class="input-group-addon inputLabel">\r\n				<span class="hidden-xs">{{language[\'action.pose.joint.name\']}}</span>\r\n				<span class="visible-xs">{{language[\'action.pose.joint.name.short\']}}</span>\r\n			</span>\r\n			<select\r\n				name="jointname"\r\n				class="selectpicker form-control"\r\n				ng-options="name for name in ((jointNames || []).length ? jointNames : [jointPosition.jointName]) | orderBy:\'toString()\'"\r\n				ng-model="jointPosition.jointName"\r\n				ng-disabled="jointForm.jointname.$pristine && jointForm.jointname.$valid"\r\n				required\r\n				notEmpty\r\n				saveable>\r\n				<option value="">{{language[\'action.pose.joint.select.prompt\']}}</option>\r\n			</select>\r\n			<span\r\n				class="input-group-btn"\r\n				ng-if="jointPosition.id">\r\n				<button\r\n					class="btn btn-default"\r\n					type="button"\r\n					ng-click="removeJoint()">{{language[\'action.pose.joint.delete\']}}</button>\r\n			</span>\r\n		</div>\r\n		<div>\r\n			<div class="input-group">\r\n				<span class="input-group-addon inputLabel">{{language[\'action.pose.joint.position\']}}</span>\r\n				<div\r\n					ng-show="advanced"\r\n					guislider\r\n					name="jointposition"\r\n					saveable\r\n					floor="coalesce(servo.minPosition, servoModel.minPosition, -180)"\r\n					ceiling="coalesce(servo.maxPosition, servoModel.maxPosition, 180)"\r\n					ng-model="jointPosition.position"></div>\r\n				<span\r\n					class="input-group-btn form-control nopadding"\r\n					ng-hide="advanced">\r\n					<button\r\n						type="button"\r\n						class="btn btn-primary check fill"\r\n						ng-model="poseable"\r\n						btn-checkbox>{{language[\'action.pose.joint.poseable\']}}</button>\r\n				</span>\r\n				<span class="input-group-addon">{{jointPosition.position}}&deg;</span>\r\n			</div>\r\n			<div class="input-group noselect">\r\n				<span class="input-group-addon inputLabel">{{language[\'action.pose.joint.speed\']}}</span>\r\n				<div\r\n					guislider\r\n					name="jointspeed"\r\n					saveable\r\n					ng-model="jointPosition.speed"\r\n					floor="coalesce(servo.minSpeed, servoModel.minSpeed, 1)"\r\n					ceiling="coalesce(servo.maxSpeed, servoModel.maxSpeed, 300)"></div>\r\n				<span class="input-group-addon">{{jointPosition.speed}}%</span>\r\n			</div>\r\n		</div>\r\n		</ng-form>\r\n	</div>\r\n</div>\r\n'}),define("actions/directives/JointEditor",["require","angular","robots/services/interfaceServices","text!./jointEditor.tpl.html"],function(require){require("angular");require("robots/services/interfaceServices");var template=require("text!./jointEditor.tpl.html"),JointEditor=function(robotInterface,JointPosition,ServoModel,language){return{template:template,restrict:"E",scope:{jointNames:"=",jointPosition:"=",servo:"=",servoPositions:"=",connected:"=",groupPoseable:"=?poseable",advanced:"=?"},controller:function($scope){$scope.language=language.getText(),void 0===$scope.advanced&&($scope.advanced=!$scope.connected),$scope.poseable=!1,$scope.$watch("groupPoseable",function(value){$scope.poseable=value});var checkPositions=function(){$scope.jointPosition&&((void 0===$scope.jointPosition.position||null===$scope.jointPosition.position)&&($scope.jointPosition.position=void 0!==$scope.servo&&null!==$scope.servo&&void 0!==$scope.servo.defaultPosition&&null!==$scope.servo.defaultPosition?$scope.servo.defaultPosition:void 0!==$scope.servoModel&&null!==$scope.servoModel&&void 0!==$scope.servoModel.defaultPosition&&null!==$scope.servoModel.defaultPosition?$scope.servoModel.defaultPosition:0),(void 0===$scope.jointPosition.speed||null===$scope.jointPosition.speed)&&($scope.jointPosition.speed=void 0!==$scope.servo&&null!==$scope.servo&&void 0!==$scope.servo.defaultSpeed&&null!==$scope.servo.defaultSpeed?$scope.servo.defaultSpeed:void 0!==$scope.servoModel&&null!==$scope.servoModel&&void 0!==$scope.servoModel.defaultPosition&&null!==$scope.servoModel.defaultSpeed?$scope.servoModel.defaultSpeed:100))};$scope.$watch("servo",checkPositions),$scope.$watch("jointPosition",checkPositions),$scope.$watch("servo.jointName",function(jointName){$scope.servoInt=robotInterface.getServo(jointName)}),$scope.removeJoint=function(){var promise;promise=void 0===$scope.jointPosition.$delete?JointPosition.delete({id:$scope.jointPosition.id}):$scope.jointPosition.$delete(),promise.then(function(){delete $scope.jointPosition.id})},$scope.$watch("servo.model_id",function(modelId){void 0!==modelId&&($scope.servoModel=ServoModel.get({id:modelId}))}),$scope.$watch("connected",function(value){value&&$scope.writeToServo()}),$scope.coalesce=function(){for(var i=0;i<arguments.length;i++)if(void 0!==arguments[i]&&null!==arguments[i])return arguments[i];return null};var writeToServo=function(){$scope.jointPosition&&$scope.servoInt&&$scope.advanced&&($scope.servoInt.speed=$scope.jointPosition.speed,$scope.servoInt.position=$scope.jointPosition.position,$scope.servoInt.poseable=$scope.poseable)};$scope.$watch("servoInt.actual.position",function(value){!$scope.advanced&&$scope.jointPosition&&($scope.jointPosition.position=value)}),$scope.$watch("jointPosition.position",writeToServo),$scope.$watch("poseable",writeToServo)}}};return["robotInterface","JointPosition","ServoModel","language",JointEditor]}),define("text!actions/directives/sequenceEditor.tpl.html",[],function(){return'<form\r\n	name="sequenceForm"\r\n	model="sequence">\r\n	<div class="col-lg-12 input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'action.sequence.name\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Sequence Name"\r\n			required\r\n			saveable\r\n			name="name"\r\n			ng-model="sequence.name">\r\n	</div>\r\n	<div class="row">\r\n		<div class="col-lg-5">\r\n			<div class="panel panel-default">\r\n				<div class="panel-heading">{{language[\'action.sequence.actions.list.label\']}}</div>\r\n				<div class="input-group fill">\r\n					<select\r\n						class="selectpicker fill form-control"\r\n						multiple\r\n						ng-multiple="true"\r\n						ng-model="toAdd"\r\n						ng-options="action.name for action in actions | except:sequence | orderBy:\'name\'">\r\n					</select>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="col-lg-2">\r\n			<div class="row">&nbsp;</div>\r\n			<div class="row">\r\n				<button\r\n					class="btn btn-default col-lg-12"\r\n					ng-disabled="!toAdd || toAdd.length == 0"\r\n					type="button"\r\n					ng-click="addActions(toAdd);toAdd=[]">{{language[\'action.sequence.actions.add\']}}\r\n					&rarr;</button>\r\n			</div>\r\n			<div class="row">\r\n				<button\r\n					class="btn btn-default col-lg-12"\r\n					ng-disabled="!toRemove || toRemove.length == 0"\r\n					type="button"\r\n					ng-click="removeActions(toRemove);toRemove=[]">&larr;\r\n					{{language[\'action.sequence.actions.remove\']}}</button>\r\n			</div>\r\n			<div class="row">\r\n				<button\r\n					class="btn btn-default col-lg-12"\r\n					ng-disabled="!toRemove || toRemove.length == 0"\r\n					type="button"\r\n					ng-click="moveActions(toRemove, -1);toRemove=[]">&uarr;\r\n					{{language[\'action.sequence.actions.moveUp\']}}</button>\r\n			</div>\r\n			<div class="row">\r\n				<button\r\n					class="btn btn-default col-lg-12"\r\n					ng-disabled="!toRemove || toRemove.length == 0"\r\n					type="button"\r\n					ng-click="moveActions(toRemove, 1);toRemove=[]">&darr;\r\n					{{language[\'action.sequence.actions.moveDown\']}}</button>\r\n			</div>\r\n		</div>\r\n		<div class="col-lg-5">\r\n			<div class="panel panel-default">\r\n				<div class="panel-heading">{{action.sequence.actions.title}}</div>\r\n				<div class="input-group fill">\r\n					<select\r\n						class="selectpicker fill form-control"\r\n						multiple\r\n						ng-multiple="true"\r\n						ng-model="toRemove"\r\n						ng-options="((action.order + 1) + \'. \' + getName(action.action_id)) for action in sequence.ordered_actions | orderBy:\'order\'">\r\n					</select>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</form>\r\n<div class="row">\r\n	<div class="col-lg-12">\r\n		<small>{{language[\'action.sequence.help.short\']}}</small>\r\n	</div>\r\n</div>\r\n'}),define("actions/directives/SequenceEditor",["require","angular","text!./sequenceEditor.tpl.html","actions/models"],function(require){var template=(require("angular"),require("text!./sequenceEditor.tpl.html"));require("actions/models");var SequenceEditor=function(SequenceOrder,language){return{template:template,restrict:"E",scope:{sequence:"=action",actions:"="},controller:function($scope){$scope.language=language.getText(),$scope.$watch("sequence",function(sequence){void 0===sequence.ordered_actions&&(sequence.ordered_actions=[])}),$scope.getName=function(actionId){if(void 0!==$scope.actions)for(var i=0;i<$scope.actions.length;i++)if($scope.actions[i].id==actionId)return $scope.actions[i].name;return"Unknown action"},$scope.moveActions=function(oactions,change){if(void 0!==oactions&&oactions.length>0){for(var i=0;i<oactions.length;i++){oactions[i].order+=change,oactions[i].order<0&&(oactions[i].order=0);for(var j=0;j<$scope.sequence.ordered_actions.length;j++){var test=$scope.sequence.ordered_actions[j];if(test!=oactions[i]&&test.order==oactions[i].order){test.order-=change;break}}}$scope.saveAll()}},$scope.saveAll=function(){for(var i=0;i<$scope.sequence.ordered_actions.length;){for(var left=$scope.sequence.ordered_actions[i],next=!1,j=0;j<$scope.sequence.ordered_actions.length;j++){var right=$scope.sequence.ordered_actions[j];left!=right&&(left.order==right.order?right.order+=1:left.order-1==right.order&&(next=!0))}next||0===left.order?i++:left.order-=1}$scope.sequence.$save()},$scope.addActions=function(actions){for(var successFunc=function(result){$scope.sequence.ordered_actions.push(result),$scope.saveAll()},i=0;i<actions.length;i++){var oa=new SequenceOrder;oa.order=$scope.sequence.ordered_actions.length,oa.sequence_id=$scope.sequence.id,oa.action_id=actions[i].id,oa.$save().then(successFunc)}},$scope.removeActions=function(oactions){for(var i=0;i<oactions.length;i++){var action=$scope.sequence.ordered_actions.splice($scope.sequence.ordered_actions.indexOf(oactions[i]),1);action.$delete()}$scope.saveAll()}}}};return["SequenceOrder","language",SequenceEditor]}),define("text!actions/directives/soundEditor.tpl.html",[],function(){return'<div>\r\n	<form\r\n		name="soundForm"\r\n		model="sound">\r\n		<div class="input-group">\r\n			<span class="input-group-addon inputLabel">{{language[\'action.sound.name\']}}</span>\r\n			<input\r\n				name="name"\r\n				type="text"\r\n				class="form-control"\r\n				placeholder="Sound Name"\r\n				required\r\n				ng-model="sound.name">\r\n		</div>\r\n		<div class="input-group">\r\n			<span class="input-group-addon inputLabel">{{language[\'action.sound.selectFile\']}}</span>\r\n			<input\r\n				class="form-control"\r\n				type="file"\r\n				onchange="angular.element(this).scope().setFiles(this)" />\r\n			<span class="input-group-btn">\r\n				<button\r\n					class="btn btn-default"\r\n					type="button"\r\n					ng-click="uploadFile(file)">{{language[\'action.sound.upload\']}}</button>\r\n			</span>\r\n		</div>\r\n	</form>\r\n	<div>\r\n		<strong>TODO:</strong>\r\n		<ul>\r\n			<li>Show if current sound set</li>\r\n			<li>Play current sound</li>\r\n		</ul>\r\n	</div>\r\n</div>'}),define("actions/directives/SoundEditor",["require","angular","text!./soundEditor.tpl.html"],function(require){var template=(require("angular"),require("text!./soundEditor.tpl.html")),SoundEditor=function(language){return{template:template,restrict:"E",scope:{sound:"=action"},controller:function($scope){$scope.language=language.getText()}}};return["language",SoundEditor]}),define("actions/directives",["require","angular","angularSlider","common/services/displayServices","robots/services/interfaceServices","robots/directives","common/filters","actions/models","./directives/ActionEditor","./directives/AdvancedPoseEditor","./directives/BasicPoseEditor","./directives/GroupEditor","./directives/PoseEditor","./directives/JointEditor","./directives/SequenceEditor","./directives/SoundEditor"],function(require){{var angular=require("angular"),angularSlider=require("angularSlider"),displayServices=require("common/services/displayServices"),interfaceServices=require("robots/services/interfaceServices"),robotDirectives=require("robots/directives"),filters=require("common/filters"),actionModels=require("actions/models"),ActionEditor=require("./directives/ActionEditor"),AdvancedPoseEditor=require("./directives/AdvancedPoseEditor"),BasicPoseEditor=require("./directives/BasicPoseEditor"),GroupEditor=require("./directives/GroupEditor"),PoseEditor=require("./directives/PoseEditor"),JointEditor=require("./directives/JointEditor"),SequenceEditor=require("./directives/SequenceEditor"),SoundEditor=require("./directives/SoundEditor"),moduleName="kasparGUI.actions.directives",dependancies=[displayServices,angularSlider,interfaceServices,filters,actionModels,robotDirectives];angular.module(moduleName,dependancies).directive("actionEditor",ActionEditor).directive("advancedPoseEditor",AdvancedPoseEditor).directive("basicPoseEditor",BasicPoseEditor).directive("groupactionEditor",GroupEditor).directive("poseactionEditor",PoseEditor).directive("sequenceactionEditor",SequenceEditor).directive("soundactionEditor",SoundEditor).directive("jointEditor",JointEditor)}return moduleName}),define("actions/ActionController",["require","angular","actions/models","actions/directives"],function(require){var angular=require("angular");require("actions/models"),require("actions/directives");var ActionController=function($scope,$http,Action,ActionType,language){$scope.language=language.getText(),$scope.actions=Action.query(),$scope.types=ActionType.query(),$scope.$watch("action",function(action){if(void 0!==action){var abstractAction=$scope.action,concreteAction=$scope.action.getConcreteClassInstance();concreteAction.$promise.then(function(){$scope.actions[$scope.actions.indexOf(abstractAction)]=concreteAction,$scope.action=concreteAction})}}),$scope.setFiles=function(element){$scope.$apply(function($scope){$scope.files=element.files})},$scope.newAction=function(){$scope.action=new Action({type:"Action"}),$scope.actions.push($scope.action)},$scope.deleteAction=function(action){$scope.actions.splice($scope.actions.indexOf(action),1),$scope.action=$scope.actions[0]},$scope.uploadSound=function(file){var fd=new FormData;fd.append("data",file);$http.post("/api/SoundAction/upload",fd,{header:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(data){$scope.fileId=data})};var errorFunc=function(status){console.log("Error sending file:"+status)},successFunc=function(data){$scope.newobjs.push(data)};$scope.importFiles=function(files){for(var i=0;i<files.length;i++){var fd=new FormData;fd.append("data",files[i]);{$http.post("/api/Action/Import",fd,{headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(successFunc).error(errorFunc)}}}};return["$scope","$http","Action","ActionType","language",ActionController]}),define("actions/ActionTestController",["require","angular","actions/models"],function(require){require("angular");require("actions/models");var ActionTestController=function($scope,$http,$q,$timeout,Action,ActionTest,language){$scope.language=language.getText(),$scope.running=!1,$scope.actions=Action.query(),$scope.output="",$scope.startAction=function(action){$scope.output+="Start action "+action.name+"\n",ActionTest.save({id:$scope.action.id}).$promise.then(getOutput())};var getOutput=function(){$scope.output+="TODO: live update of running actions\n"};$scope.stopAction=function(action){$scope.output+="TODO: Stop action "+action.name+"\n"}};return["$scope","$http","$q","$timeout","Action","ActionTest","language",ActionTestController]}),define("actions/controllers",["require","angular","common/i18n/languageServices","actions/models","actions/directives","./ActionController","./ActionTestController"],function(require){{var angular=require("angular"),languageServices=require("common/i18n/languageServices"),actionModels=require("actions/models"),actionDirectives=require("actions/directives"),ActionController=require("./ActionController"),ActionTestController=require("./ActionTestController"),moduleName="kasparGUI.actions",dependancies=[actionModels,actionDirectives,languageServices];angular.module(moduleName,dependancies).controller("actionController",ActionController).controller("actionTestController",ActionTestController)}return moduleName}),define("text!actions/index.tpl.html",[],function(){return"<ui-view />"}),define("text!actions/actionEdit.tpl.html",[],function(){return'<strong>TODO</strong>\r\n<ul>\r\n	<li><strong> Feedback on Saving </strong>\r\n		<ul>\r\n			<li>Sound File</li>\r\n			<li>Group Actions</li>\r\n			<li>Sequence Actions</li>\r\n		</ul></li>\r\n</ul>\r\n<div\r\n	ng-cloak\r\n	id="actionsList">\r\n	<div class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'action.label\']}}</span>\r\n		<select\r\n			class="selectpicker form-control"\r\n			ng-model="action"\r\n			ng-disabled="actions.length == 0"\r\n			ng-options="action.name group by action.type for action in actions | orderBy:\'name\'">\r\n			<option value="">{{language[\'action.select.prompt\']}}</option>\r\n		</select>\r\n		<span class="input-group-btn">\r\n			<button\r\n				class="btn btn-default"\r\n				type="button"\r\n				ng-click="newAction()">{{language[\'action.new\']}}</button>\r\n			<button\r\n				class="btn btn-default"\r\n				type="button"\r\n				ng-click="deleteAction(action)">{{language[\'action.delete\']}}</button>\r\n		</span>\r\n	</div>\r\n	<hr />\r\n	<div ng-if="action">\r\n		<div class="input-group">\r\n			<span class="input-group-addon inputLabel">{{language[\'action.type.label\']}}</span>\r\n			<select\r\n				ng-disabled="action.id"\r\n				class="selectpicker form-control"\r\n				ng-model="action.type"\r\n				ng-options="type.name as type.disp for type in types | orderBy:\'type.disp\'">\r\n				<option value="">{{language[\'action.type.select.prompt\']}}</option>\r\n			</select>\r\n		</div>\r\n		<action-editor\r\n			action="action"\r\n			actions="actions"></action-editor>\r\n	</div>\r\n</div>'}),define("text!actions/actionImport.tpl.html",[],function(){return'<div>\r\n	<div class="btn-group">\r\n		<div class="input-group">\r\n			<span class="input-group-addon inputLabel">{{language[\'action.import.selectFiles\']}}</span>\r\n			<input\r\n				class="form-control"\r\n				type="file"\r\n				multiple="multiple"\r\n				onchange="angular.element(this).scope().setFiles(this)" />\r\n			<span class="input-group-btn">\r\n				<button\r\n					class="btn btn-default"\r\n					type="button"\r\n					ng-click="importFiles(files)">{{language[\'action.import.upload\']}}</button>\r\n			</span>\r\n		</div>\r\n	</div>\r\n	<div>\r\n		<div ng-repeat="obj in newobjs">{{obj}}</div>\r\n	</div>\r\n</div>'}),define("text!actions/actionTest.tpl.html",[],function(){return'<div>\r\n	<div class="input-group col-lg-12">\r\n		<span class="input-group-addon inputLabel">{{language[\'action.label\']}}</span>\r\n		<select\r\n			class="selectpicker form-control"\r\n			ng-model="action"\r\n			ng-options="action.name group by action.type for action in actions | orderBy:\'name\'"\r\n			ng-disabled="actions.length == 0">\r\n			<option value="">{{language[\'action.select.prompt\']}}</option>\r\n		</select>\r\n		<span class="input-group-btn">\r\n			<button\r\n				class="btn btn-default"\r\n				type="button"\r\n				ng-if="!actionTest.active"\r\n				ng-disabled="!action"\r\n				ng-click="startAction(action)">{{language[\'action.test\']}}</button>\r\n			<button\r\n				class="btn btn-default"\r\n				type="button"\r\n				ng-if="actionTest.active"\r\n				ng-disabled="!action"\r\n				ng-click="stopAction(action)">{{language[\'action.stop\']}}</button>\r\n		</span>\r\n	</div>\r\n	<div class="col-lg-6"></div>\r\n</div>\r\n<hr />\r\n<div\r\n	class="logWindow"\r\n	ng-show="action != \'\'">\r\n	<div class="col-lg-12 well maxHeight">\r\n		<pre class="scrollable maxHeight">{{output}}</pre>\r\n	</div>\r\n</div>'
}),define("categories/action",["require","angular","angularUIRouter","actions/controllers","text!actions/index.tpl.html","text!actions/actionEdit.tpl.html","text!actions/actionImport.tpl.html","text!actions/actionTest.tpl.html"],function(require){var angular=require("angular"),uiRouter=require("angularUIRouter"),actionControllers=require("actions/controllers"),defaultTemplate=require("text!actions/index.tpl.html"),editTemplate=require("text!actions/actionEdit.tpl.html"),importTemplate=require("text!actions/actionImport.tpl.html"),testTemplate=require("text!actions/actionTest.tpl.html"),moduleName="kasparGUI.menu.action",dependancies=[uiRouter,actionControllers],Routes=function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/"),$stateProvider.state("action",{url:"/action",template:defaultTemplate,"abstract":!0}).state("action.edit",{url:"{id:(?:/[0-9]{1,8})?}/edit",template:editTemplate,controller:"actionController"}).state("action.test",{url:"{id:(?:/[0-9]{1,8})?}/test",template:testTemplate,controller:"actionTestController"}).state("action.import",{url:"/import",template:importTemplate,controller:"actionController"})},module=angular.module(moduleName,dependancies);return module.config(["$stateProvider","$urlRouterProvider",Routes]),moduleName}),define("users/models/CustomAction",["require"],function(){var CustomAction=function(modelBuilder){var _service=modelBuilder.getModel("CustomAction");return _service};return["modelBuilder",CustomAction]}),define("users/models/CustomTrigger",["require"],function(){var CustomTrigger=function(modelBuilder){var _service=modelBuilder.getModel("CustomTrigger");return _service};return["modelBuilder",CustomTrigger]}),define("users/models/User",["require"],function(){var User=function(modelBuilder){var _service=modelBuilder.getModel("User");return _service};return["modelBuilder",User]}),define("users/models/UserAction",["require"],function(){var UserAction=function(modelBuilder){var _service=modelBuilder.getModel("UserAction");return _service};return["modelBuilder",UserAction]}),define("users/models",["require","angular","angularResource","./models/CustomAction","./models/CustomTrigger","./models/User","./models/UserAction"],function(require){{var angular=require("angular"),angularResource=require("angularResource"),CustomAction=require("./models/CustomAction"),CustomTrigger=require("./models/CustomTrigger"),User=require("./models/User"),UserAction=require("./models/UserAction"),moduleName="kasparGUI.users.models",dependancies=[angularResource];angular.module(moduleName,dependancies).factory("CustomAction",CustomAction).factory("CustomTrigger",CustomTrigger).factory("User",User).factory("UserAction",UserAction)}return moduleName}),define("operators/models/Operator",["require"],function(){var Operator=function(modelBuilder){var _service=modelBuilder.getModel("Operator");return _service};return["modelBuilder",Operator]}),define("operators/models",["require","angular","angularResource","./models/Operator"],function(require){{var angular=require("angular"),angularResource=require("angularResource"),Operator=require("./models/Operator"),moduleName="kasparGUI.operators.models",dependancies=[angularResource];angular.module(moduleName,dependancies).factory("Operator",Operator)}return moduleName}),define("operators/OperatorController",["require","angular","users/models","operators/models"],function(require){require("angular");require("users/models"),require("operators/models");var OperatorController=function($scope,Operator,User,language){$scope.language=language.getText(),$scope.operators=Operator.query(function(operators){$scope.selectedOperator=operators[0]}),$scope.usersSaved=!1,$scope.users=User.query(),$scope.$watch("operatorsForm.$pristine",function(value){value||($scope.usersSaved=!1)}),$scope.saveOperator=function(){$scope.formCtrl.$valid&&$scope.selectedOperator.$fromServer&&$scope.selectedOperator.$save(function(){$scope.usersSaved=!0,$scope.operatorsForm.$setPristine()})},$scope.newOperator=function(){var newOp=new Operator({fullname:"",name:"",users:[]});$scope.selectedOperator=newOp,$scope.operators.push(newOp)},$scope.deleteOperator=function(operator){operator.$delete(),$scope.operators.splice($scope.operators.indexOf(operator),1),$scope.selectedOperator=$scope.operators[0]},$scope.toggleOperatorUser=function(operator,user){if(void 0!==operator&&void 0!==operator.users){for(var found=!1,i=0;i<operator.users.length;i++)if(operator.users[i].id==user.id){operator.users.splice(i,1),found=!0;break}found||operator.users.push(user),$scope.saveOperator()}}};return["$scope","Operator","User","language",OperatorController]}),define("operators/controllers",["require","angular","common/i18n/languageServices","users/models","operators/models","./OperatorController"],function(require){{var angular=require("angular"),languageServices=require("common/i18n/languageServices"),userModels=require("users/models"),operatorModels=require("operators/models"),OperatorController=require("./OperatorController"),moduleName="kasparGUI.operators.controllers",dependancies=[userModels,languageServices,operatorModels];angular.module(moduleName,dependancies).controller("operatorController",OperatorController)}return moduleName}),define("text!operators/index.tpl.html",[],function(){return'<div>\r\n	<div id="operatorsList">\r\n		<div class="input-group">\r\n			<span class="input-group-addon inputLabel">{{language[\'operator.label\']}}</span>\r\n			<select\r\n				class="selectpicker form-control"\r\n				ng-model="selectedOperator"\r\n				ng-options="operator.fullname for operator in operators | orderBy:\'fullname\'">\r\n				<option value="">{{language[\'operator.select.prompt\']}}</option>\r\n			</select>\r\n			<span class="input-group-btn">\r\n				<button\r\n					class="btn btn-default"\r\n					type="button"\r\n					ng-click="newOperator()">{{language[\'operator.new\']}}</button>\r\n				<button\r\n					class="btn btn-default"\r\n					type="button"\r\n					ng-click="deleteOperator(selectedOperator)">{{language[\'operator.delete\']}}</button>\r\n			</span>\r\n		</div>\r\n	</div>\r\n	<form\r\n		ng-show="selectedOperator"\r\n		name="operatorsForm"\r\n		model="selectedOperator">\r\n		<div class="input-group">\r\n			<span class="input-group-addon inputLabel">{{language[\'operator.name\']}}</span>\r\n			<input\r\n				type="text"\r\n				class="form-control"\r\n				placeholder="Full Name"\r\n				saveable\r\n				required\r\n				name="fullname"\r\n				ng-model="selectedOperator.fullname">\r\n		</div>\r\n		<div class="input-group">\r\n			<span class="input-group-addon inputLabel">{{language[\'operator.users\']}}</span>\r\n			<div\r\n				class="list-group form-control listForm"\r\n				ng-blur="saveOperator()"\r\n				ng-class="{ \'has-success\': usersSaved, \'has-warning\': operatorsForm.$dirty && !userSaved }">\r\n				<span\r\n					class="list-group-item"\r\n					ng-repeat="user in users">\r\n					<span class="input-group">\r\n						<span class="input-group-addon">\r\n							<input\r\n								type="checkbox"\r\n								ng-disabled="!selectedOperator"\r\n								ng-checked="(selectedOperator.users | filter:{id:user.id}:true).length == 1"\r\n								ng-click="toggleOperatorUser(selectedOperator, user)">\r\n						</span>\r\n						<input\r\n							type="text"\r\n							class="form-control"\r\n							ng-click="toggleOperatorUser(selectedOperator, user)"\r\n							value="{{user.fullname}}"\r\n							ng-disabled="true">\r\n					</span>\r\n				</span>\r\n			</div>\r\n		</div>\r\n	</form>\r\n</div>\r\n<div ui-view></div>'}),define("triggers/models/ButtonHotkey",["require"],function(){var ButtonHotkey=function(modelBuilder){var _service=modelBuilder.getModel("ButtonHotkey");return _service};return["modelBuilder",ButtonHotkey]}),define("triggers/models/Trigger",["require"],function(){var Trigger=function($rootScope,modelBuilder){var resource=modelBuilder.getModel("Trigger",{},{create:{method:"POST",url:":type",params:{type:"@type"},isArray:!1},update:{method:"PUT",url:":type/:id",params:{type:"@type",id:"@id"},isArray:!1}});return resource};return["$rootScope","modelBuilder",Trigger]}),define("triggers/models/ButtonTrigger",["require"],function(){var ButtonTrigger=function($rootScope,modelBuilder){var resource=modelBuilder.getModel("ButtonTrigger");return resource};return["$rootScope","modelBuilder",ButtonTrigger]}),define("triggers/models/TriggerType",["require"],function(){var TriggerType=function(modelBuilder){var _service=modelBuilder.getModel("TriggerType");return _service};return["modelBuilder",TriggerType]}),define("triggers/models",["require","angular","angularResource","./models/ButtonHotkey","./models/Trigger","./models/ButtonTrigger","./models/TriggerType"],function(require){{var angular=require("angular"),angularResource=require("angularResource"),ButtonHotkey=require("./models/ButtonHotkey"),Trigger=require("./models/Trigger"),ButtonTrigger=require("./models/ButtonTrigger"),TriggerType=require("./models/TriggerType"),moduleName="kasparGUI.triggers.models",dependancies=[angularResource];angular.module(moduleName,dependancies).factory("ButtonHotkey",ButtonHotkey).factory("Trigger",Trigger).factory("ButtonTrigger",ButtonTrigger).factory("TriggerType",TriggerType)}return moduleName}),define("users/UserController",["require","angular","actions/models","triggers/models","users/models"],function(require){require("angular");require("actions/models"),require("triggers/models"),require("users/models");var UserController=function($scope,$filter,User,CustomAction,CustomTrigger,Action,Trigger,language){$scope.language=language.getText(),$scope.users=User.query(),$scope.$watch("selectedUser",function(user){void 0!==user&&void 0===user.speedmodifier&&(user.speedmodifier=100)})};return["$scope","$filter","User","CustomAction","CustomTrigger","Action","Trigger","language",UserController]}),define("users/controllers",["require","angular","common/i18n/languageServices","actions/models","triggers/models","users/models","./UserController"],function(require){{var angular=require("angular"),languageServices=require("common/i18n/languageServices"),actionModels=require("actions/models"),triggerModels=require("triggers/models"),userModels=require("users/models"),UserController=require("./UserController"),moduleName="kasparGUI.users.controllers",dependancies=[actionModels,languageServices,triggerModels,userModels];angular.module(moduleName,dependancies).controller("userController",UserController)}return moduleName}),define("text!users/index.tpl.html",[],function(){return'<div>\r\n	<div id="userList">\r\n		<div class="input-group">\r\n			<span class="input-group-addon inputLabel">{{language[\'user.label\']}}</span>\r\n			<select\r\n				class="selectpicker form-control"\r\n				ng-model="selectedUser"\r\n				ng-options="user.fullname for user in users | orderBy:\'fullname\'">\r\n				<option value="">{{language[\'user.select.prompt\']}}</option>\r\n			</select>\r\n			<span class="input-group-btn">\r\n				<button\r\n					class="btn btn-default"\r\n					type="button"\r\n					ng-click="newObj(User, users)">{{language[\'user.new\']}}</button>\r\n				<button\r\n					class="btn btn-default"\r\n					type="button"\r\n					ng-click="deleteObj(item, users)">{{language[\'user.delete\']}}</button>\r\n			</span>\r\n		</div>\r\n	</div>\r\n	<form\r\n		ng-if="selectedUser"\r\n		name="userForm"\r\n		model="selectedUser">\r\n		<div class="input-group">\r\n			<span class="input-group-addon inputLabel">{{language[\'user.name\']}}</span>\r\n			<input\r\n				type="text"\r\n				class="form-control"\r\n				placeholder="Full Name"\r\n				name="fullname"\r\n				required\r\n				ng-model="selectedUser.fullname"\r\n				saveable>\r\n		</div>\r\n		<div class="input-group">\r\n			<span class="input-group-addon inputLabel">{{language[\'user.custom.action.label\']}}</span>\r\n			<select\r\n				class="selectpicker form-control"\r\n				ng-model="selectedAction"\r\n				ng-options="action.name for action in selectedUser.actions | orderBy:\'name\'">\r\n			</select>\r\n			<span class="input-group-btn">\r\n				<button\r\n					class="btn btn-default"\r\n					type="button"\r\n					ng-disabled="true"\r\n					ng-click="newAction()">{{language[\'user.custom.action.new\']}}</button>\r\n				<button\r\n					class="btn btn-default"\r\n					type="button"\r\n					ng-disabled="true"\r\n					ng-click="deleteAction(selectedAction)">{{language[\'user.custom.action.delete\']}}</button>\r\n			</span>\r\n		</div>\r\n		<div class="input-group">\r\n			<span class="input-group-addon inputLabel">{{language[\'user.custom.trigger.label\']}}</span>\r\n			<select\r\n				class="selectpicker form-control"\r\n				ng-model="selectedTrigger"\r\n				ng-options="trigger.name for trigger in selectedUser.triggers | orderBy:\'name\'">\r\n			</select>\r\n			<span class="input-group-btn">\r\n				<button\r\n					class="btn btn-default"\r\n					type="button"\r\n					ng-click="newTrigger()"\r\n					ng-disabled="true">{{language[\'user.custom.trigger.new\']}}</button>\r\n				<button\r\n					class="btn btn-default"\r\n					type="button"\r\n					ng-disabled="true"\r\n					ng-click="deleteTrigger(selectedTrigger)">{{language[\'user.custom.trigger.delete\']}}</button>\r\n			</span>\r\n		</div>\r\n		<div class="input-group">\r\n			<span class="input-group-addon inputLabel">{{language[\'user.speedModifier\']}}</span>\r\n			<div\r\n				guislider\r\n				name="speed"\r\n				saveable\r\n				floor="1"\r\n				ceiling="300"\r\n				ng-disabled="true"\r\n				ng-model="selectedUser.speedmodifier"></div>\r\n			<span class="input-group-addon">{{selectedUser.speedmodifier}}%</span>\r\n		</div>\r\n	</form>\r\n</div>\r\n<div ui-view></div>'}),define("robots/RobotController",["require","angular","robots/models"],function(require){require("angular");require("robots/models");var RobotController=function($scope,Robot,language){$scope.language=language.getText(),$scope.robots=Robot.query(),$scope.connected=!1,$scope.connect=function(){$scope.connected=!0},$scope.disconnect=function(){$scope.connected=!1}};return["$scope","Robot","language",RobotController]}),define("robots/controllers",["require","angular","common/i18n/languageServices","robots/models","./RobotController"],function(require){{var angular=require("angular"),languageServices=require("common/i18n/languageServices"),robotModels=require("robots/models"),RobotController=require("./RobotController"),moduleName="kasparGUI.robots.controllers",dependancies=[robotModels,languageServices];angular.module(moduleName,dependancies).controller("robotController",RobotController)}return moduleName}),define("text!robots/index.tpl.html",[],function(){return'<div\r\n	ng-cloak>\r\n	<div class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'robot.label\']}}</span>\r\n		<select\r\n			class="selectpicker form-control"\r\n			ng-model="selected"\r\n			ng-options="(item.name + \' (\' + item.model.name + \': \' + item.version + \')\' ) for item in robots | orderBy:\'name\'">\r\n			<option value="">{{language[\'robot.select.prompt\']}}</option>\r\n		</select>\r\n		<span class="input-group-btn">\r\n			<button\r\n				class="btn btn-default"\r\n				ng-disabled="true"\r\n				type="button"\r\n				ng-click="newObj()">{{language[\'robot.new\']}}</button>\r\n			<button\r\n				class="btn btn-default"\r\n				ng-disabled="true"\r\n				type="button"\r\n				ng-click="deleteObj(selected)">{{language[\'robot.delete\']}}</button>\r\n		</span>\r\n	</div>\r\n	<hr />\r\n	<robot-editor robot="selected" ng-if="selected"></robot-editor>\r\n</div>'}),define("common/CommonController",["require","angular"],function(require){var CommonController=(require("angular"),function($scope){$scope.version="3.0 Alpha 10"});return["$scope","$rootScope",CommonController]}),define("common/SettingsController",["require","angular","common/models","robots/models"],function(require){require("angular");require("common/models"),require("robots/models");var SettingsController=function($q,$scope,Setting,Robot,language){$scope.language=language.getText(),$scope.robots=Robot.query(),$scope.settings=Setting.query(),$scope.settings.$promise.then(function(settings){for(var i=0;i<settings.length;i++)if("robot"==settings[i].key){$scope.robotSetting=settings[i];break}void 0===$scope.robotSetting&&($scope.robotSetting=new Setting({key:"robot",value:""}))}),$scope.$watch("robotSetting.value",function(newValue){void 0!==newValue&&$scope.robotSetting.$save()})};return["$q","$scope","Setting","Robot","language",SettingsController]}),define("common/controllers",["require","angular","common/i18n/languageServices","angularUIRouter","common/models","robots/models","./CommonController","./SettingsController"],function(require){{var angular=require("angular"),languageServices=require("common/i18n/languageServices"),uiRouter=require("angularUIRouter"),commonModels=require("common/models"),robotModels=require("robots/models"),CommonController=require("./CommonController"),SettingsController=require("./SettingsController"),moduleName="kasparGUI.common.controllers",dependancies=[uiRouter,languageServices,commonModels,robotModels];angular.module(moduleName,dependancies).controller("commonController",CommonController).controller("settingsController",SettingsController)}return moduleName}),define("text!common/settings.tpl.html",[],function(){return"<div\r\n	ng-cloak>\r\n	<div class=\"input-group\">\r\n		<span class=\"input-group-addon inputLabel\">{{language['common.setting.robot.label']}}</span>\r\n		<select\r\n			class=\"selectpicker form-control\"\r\n			ng-model=\"robotSetting.value\"\r\n			ng-options=\"robot.name as (robot.name + ' (' + robot.model.name + ': ' + robot.version + ')' ) for robot in robots | orderBy:'name'\">\r\n			<option value=\"\">{{language['common.setting.robot.select.prompt']}}</option>\r\n		</select>\r\n	</div>\r\n</div>"}),define("categories/admin",["require","angular","angularUIRouter","operators/controllers","text!operators/index.tpl.html","users/controllers","text!users/index.tpl.html","robots/controllers","text!robots/index.tpl.html","common/controllers","text!common/settings.tpl.html"],function(require){var angular=require("angular"),uiRouter=require("angularUIRouter"),operatorControllers=require("operators/controllers"),operatorTemplate=require("text!operators/index.tpl.html"),userControllers=require("users/controllers"),userTemplate=require("text!users/index.tpl.html"),robotControllers=require("robots/controllers"),robotTemplate=require("text!robots/index.tpl.html"),settingsControllers=require("common/controllers"),settingsTemplate=require("text!common/settings.tpl.html"),moduleName="kasparGUI.menu.admin",dependancies=[uiRouter,operatorControllers,userControllers,robotControllers,settingsControllers],Routes=function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/"),$stateProvider.state("admin",{url:"/admin",template:"<ui-view/>","abstract":!0}).state("admin.operator",{url:"/operator{id:(?:/[0-9]{1,8})?}",template:operatorTemplate,controller:"operatorController"}).state("admin.user",{url:"/user{id:(?:/[0-9]{1,8})?}",template:userTemplate,controller:"userController"}).state("admin.robot",{url:"/robot{id:(?:/[0-9]{1,8})?}",template:robotTemplate,controller:"robotController"}).state("admin.setting",{url:"/setting",template:settingsTemplate,controller:"settingsController"})},module=angular.module(moduleName,dependancies);return module.config(["$stateProvider","$urlRouterProvider",Routes]),moduleName}),define("interactions/models/Interaction",["require"],function(){var Interaction=function(modelBuilder){var _service=modelBuilder.getModel("Interaction",{},{get:{method:"GET",cache:!1}});return _service};return["modelBuilder",Interaction]}),define("interactions/models/InteractionLog",["require"],function(){var Interaction=function(modelBuilder){var _service=modelBuilder.getModel("InteractionLog",{},{get:{method:"GET",cache:!1}},"Interaction/:interactionId/Log/:id");return _service};return["modelBuilder",Interaction]}),define("interactions/models",["require","angular","angularResource","./models/Interaction","./models/InteractionLog"],function(require){{var angular=require("angular"),angularResource=require("angularResource"),Interaction=require("./models/Interaction"),InteractionLog=require("./models/InteractionLog"),moduleName="kasparGUI.interactions.models",dependancies=[angularResource];angular.module(moduleName,dependancies).factory("Interaction",Interaction).factory("InteractionLog",InteractionLog)}return moduleName}),define("interactions/InteractionController",["require","angular","operators/models","users/models","triggers/models","interactions/models"],function(require){require("angular");require("operators/models"),require("users/models"),require("triggers/models"),require("interactions/models");var InteractionController=function($q,$scope,Operator,User,Interaction,ButtonTrigger,language){$scope.language=language.getText(),$scope.operators=Operator.query(),$scope.users=User.query(),$scope.interaction=null,$scope.keyBind=!0,$scope.showHotKeys=!0;var activeInteractions=Interaction.query({endTime:null});activeInteractions.$promise.then(function(result){void 0!==result&&result.length>0&&($scope.interaction=result[0],$scope.operator_id=$scope.interaction.operator_id,$scope.user_id=$scope.interaction.user_id)}),$scope.buttons=ButtonTrigger.query(),$scope.start=function(){$scope.interaction=new Interaction({startTime:new Date,user_id:$scope.user_id,robot_id:$scope.robot.id,operator_id:$scope.operator_id}),$scope.interaction.$save()},$scope.stop=function(){$scope.interaction.endTime=new Date,$scope.interaction.$save().then(function(){$scope.interaction=null})},$scope.getCategory=function(user,userList){if(void 0!==userList&&void 0!==user){for(var i=0;i<userList.length;i++)if(userList[i].id==user.id)return"Common";return"All"}}};return["$q","$scope","Operator","User","Interaction","ButtonTrigger","language",InteractionController]}),define("text!interactions/directives/actionButton.tpl.html",[],function(){return'<div ng-class="{\'input-group\': showHotKeys && keyDisplay }" class="actionButton">\r\n	<span ng-class="{\'input-group-btn\': showHotKeys && keyDisplay }" class="button">\r\n		<button\r\n			class="btn btn-default"\r\n			ng-class="{active: active}"\r\n			type="button"\r\n			ng-click="callButton(button.id)">{{button.name}}</button>\r\n	</span>\r\n	<span\r\n		class="form-control hotkey"\r\n		ng-show="showHotKeys && keyDisplay"\r\n		ng-disabled="true">{{keyDisplay}}</span>\r\n</div>\r\n'}),define("interactions/directives/ActionButton",["require","angular","common/services/displayServices","actions/models","mousetrap","text!./actionButton.tpl.html"],function(require){require("angular");require("common/services/displayServices"),require("actions/models");var Mousetrap=require("mousetrap"),template=require("text!./actionButton.tpl.html"),ActionButton=function($q,$timeout,InteractionLog,hotkeyFormatter,language){return{template:template,restrict:"E",scope:{button:"=",interaction:"=",showHotKeys:"=",keyBind:"="},link:function(){},controller:function($scope){$scope.language=language.getText(),$scope.active=!1;var keyBinds=null;$scope.$watch("button",function(newValue){if(void 0!==newValue){for(var kb=[],i=0;i<$scope.button.hotKeys.length;i++)kb.push($scope.button.hotKeys[i].keyString);$scope.keyDisplay=kb.join(" | "),null!==keyBinds&&Mousetrap.unbind(keyBinds),keyBinds=kb,Mousetrap.bind(keyBinds,function(){return $scope.active=!0,$timeout(function(){$scope.active=!1},2e3),$scope.keyBind?($scope.callButton($scope.button.id),!1):void 0})}}),$scope.callButton=function(buttonId){InteractionLog.save({interactionId:$scope.interaction.id},{button_id:buttonId,interaction_id:$scope.interaction.id})}}}};return["$q","$timeout","InteractionLog","hotkeyFormatter","language",ActionButton]}),define("text!interactions/directives/actionButtons.tpl.html",[],function(){return'<div class="row">\r\n	<div\r\n		class="col-lg-3 col-md-6 col-sm-12 col-xs-12"\r\n		ng-repeat="button in buttons | orderBy:\'name\'">\r\n		<action-button\r\n			button="button"\r\n			interaction="interaction"\r\n			user="user"\r\n			show-hot-keys="showHotKeys"\r\n			key-bind="keyBind" />\r\n	</div>\r\n</div>'}),define("interactions/directives/ActionButtons",["require","angular","common/services/displayServices","actions/models","text!./actionButtons.tpl.html"],function(require){require("angular");require("common/services/displayServices"),require("actions/models");var template=require("text!./actionButtons.tpl.html"),ActionButtons=function($q,UserAction,hotkeyFormatter,language){return{template:template,restrict:"E",scope:{buttons:"=",user:"=",interaction:"=",showHotKeys:"=",keyBind:"="},link:function(){},controller:function($scope){$scope.language=language.getText()}}};return["$q","UserAction","hotkeyFormatter","language",ActionButtons]}),define("text!interactions/directives/operatorInteraction.tpl.html",[],function(){return'<div>\r\n	<strong>TODO</strong>\r\n	<ul>\r\n		<li><strong>Feedback on keypress</strong></li>\r\n		<li><strong>Log window with ???</strong></li>\r\n		<li><strong>Images from webcam(s)?</strong></li>\r\n	</ul>\r\n	<accordion close-others="true"> <accordion-group\r\n		is-open="isopen"> <accordion-heading>{{language[\'interaction.operator.view.buttons.label\']}}<i\r\n		class="pull-right glyphicon"\r\n		ng-class="{\'glyphicon-chevron-down\': isopen, \'glyphicon-chevron-right\': !isopen}"></i>\r\n	</accordion-heading>\r\n	<div class="btn-group">\r\n		<button\r\n			type="button"\r\n			class="btn btn-primary check"\r\n			ng-model="keyBind"\r\n			ng-click="setBinding(keyBind)"\r\n			btn-checkbox>{{language[\'interaction.operator.view.activateBindings\']}}</button>\r\n		<button\r\n			type="button"\r\n			class="btn btn-primary check"\r\n			ng-model="showHotKeys"\r\n			btn-checkbox>{{language[\'interaction.operator.view.showHotkeys\']}}</button>\r\n	</div>\r\n	<hr />\r\n	<action-buttons\r\n		interaction="interaction"\r\n		buttons="buttons"\r\n		show-hot-keys="showHotKeys"\r\n		user="user"\r\n		key-bind="keyBind" /></accordion-group> </accordion>\r\n</div>'}),define("interactions/directives/OperatorInteraction",["require","angular","text!./operatorInteraction.tpl.html","mousetrap"],function(require){var template=(require("angular"),require("text!./operatorInteraction.tpl.html")),Mousetrap=require("mousetrap"),OperatorInteraction=function(language){return{template:template,restrict:"E",scope:{operator:"=",user:"=",interaction:"=",buttons:"=",showHotKeys:"=",keyBind:"="},link:function(){},controller:function($scope){$scope.language=language.getText(),$scope.isopen=!0,$scope.setBinding=function(value){value?Mousetrap.pause():Mousetrap.unpause()}}}};return["language",OperatorInteraction]}),define("text!interactions/directives/userInteraction.tpl.html",[],function(){return'<div>\r\n	<strong>TODO</strong>\r\n	<ul>\r\n		<li><strong> FullScreen/No Menus </strong></li>\r\n		<li><strong> Other ?? </strong></li>\r\n	</ul>\r\n<!-- 	<action-buttons -->\r\n<!-- 		interaction="interaction" -->\r\n<!-- 		buttons="buttons" -->\r\n<!-- 		show-hot-keys="showHotKeys" -->\r\n<!-- 		user="user" -->\r\n<!-- 		key-bind="keyBind" /> -->\r\n</div>\r\n'}),define("interactions/directives/UserInteraction",["require","angular","text!./userInteraction.tpl.html"],function(require){var template=(require("angular"),require("text!./userInteraction.tpl.html")),UserInteraction=function(language){return{template:template,restrict:"E",scope:{user:"=",interaction:"=",buttons:"=",showHotKeys:"=",keyBind:"="},link:function(){},controller:function($scope){$scope.language=language.getText()}}};return["language",UserInteraction]}),define("interactions/directives",["require","angular","common/i18n/languageServices","common/services/displayServices","common/filters","interactions/models","./directives/ActionButton","./directives/ActionButtons","./directives/OperatorInteraction","./directives/UserInteraction"],function(require){{var angular=require("angular"),languageServices=require("common/i18n/languageServices"),displayServices=require("common/services/displayServices"),filters=require("common/filters"),interactionModels=require("interactions/models"),ActionButton=require("./directives/ActionButton"),ActionButtons=require("./directives/ActionButtons"),OperatorInteraction=require("./directives/OperatorInteraction"),UserInteraction=require("./directives/UserInteraction"),moduleName="kasparGUI.interactions.directives",dependancies=[displayServices,languageServices,filters,interactionModels];angular.module(moduleName,dependancies).directive("actionButton",ActionButton).directive("actionButtons",ActionButtons).directive("operatorInteraction",OperatorInteraction).directive("userInteraction",UserInteraction)}return moduleName}),define("interactions/controllers",["require","angular","common/i18n/languageServices","operators/models","users/models","triggers/models","interactions/models","./InteractionController","interactions/directives"],function(require){{var angular=require("angular"),languageServices=require("common/i18n/languageServices"),operatorModels=require("operators/models"),userModels=require("users/models"),triggerModels=require("triggers/models"),interactionModels=require("interactions/models"),InteractionController=require("./InteractionController"),interactionDirectives=require("interactions/directives"),moduleName="kasparGUI.interactions.controllers",dependancies=[operatorModels,languageServices,userModels,triggerModels,interactionModels,interactionDirectives];angular.module(moduleName,dependancies).controller("interactionController",InteractionController)}return moduleName}),define("text!interactions/index.tpl.html",[],function(){return"<ui-view />"}),define("text!interactions/begin.tpl.html",[],function(){return'<div ng-cloak>\r\n	<div class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'interaction.operator.label\']}}</span>\r\n		<select\r\n			class="selectpicker form-control"\r\n			ng-model="operator_id"\r\n			ng-disabled="interaction"\r\n			ng-options="operator.id as operator.fullname for operator in operators | orderBy:\'fullname\'">\r\n			<option value="">{{language[\'interaction.operator.select.prompt\']}}</option>\r\n		</select>\r\n	</div>\r\n	<div class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'interaction.user.label\']}}</span>\r\n		<select\r\n			class="selectpicker form-control"\r\n			ng-model="user_id"\r\n			ng-disabled="interaction"\r\n			ng-options="user.id as user.fullname group by getCategory(user, operator.users) for user in users | orderBy:\'fullname\'">\r\n			<option value="">{{language[\'interaction.user.select.prompt\']}}</option>\r\n		</select>\r\n	</div>\r\n<!-- 	<robot-interface robot="robot"></robot-interface> -->\r\n	<div class="btn-toolbar">\r\n		<div class="btn-group">\r\n			<button\r\n				class="btn btn-default"\r\n				type="button"\r\n				ng-disabled="!(user_id && operator_id && robot.id)"\r\n				ng-if="interaction == null"\r\n				ng-click="start()">{{language[\'interaction.start\']}}</button>\r\n			<button\r\n				class="btn btn-default"\r\n				type="button"\r\n				ng-if="interaction != null"\r\n				ng-click="stop()">{{language[\'interaction.stop\']}}</button>\r\n		</div>\r\n	</div>\r\n	<tabset ng-show="interaction != null"> <tab\r\n		heading="Operator View"> <operator-interaction\r\n		operator="operator"\r\n		buttons="buttons"\r\n		user="user"\r\n		interaction="interaction"\r\n		key-bind="keyBind"\r\n		show-hot-keys="showHotKeys"></operator-interaction> </tab> <tab\r\n		heading="User View"> <user-interaction\r\n		user="user"\r\n		buttons="buttons"\r\n		interaction="interaction"\r\n		key-bind="keyBind"\r\n		show-hot-keys="showHotKeys"></user-interaction> </tab></tabset>\r\n</div>\r\n'}),define("text!interactions/log.tpl.html",[],function(){return'<h3 class="text-center">Past Interaction View Window</h3>\r\n<strong>TODO</strong>\r\n<ul>\r\n	<li><strong> View details of history </strong></li>\r\n	<li><strong> Merge with Manage screen? </strong></li>\r\n</ul>'
}),define("text!interactions/manage.tpl.html",[],function(){return'<h3 class="text-center">Past Interaction Management Window</h3>\r\n<strong>TODO</strong>\r\n<ul>\r\n	<li><strong> Remove history </strong></li>\r\n	<li><strong> Annotate history </strong></li>\r\n	<li>Do we need the ability to prepare an interaction (choose activities, pre-interaction questionnaire)?</li>\r\n	<li>This would a be a good place for the post-interaction questionnaire from the IROMEC project</li>\r\n</ul>\r\n'}),define("categories/interaction",["require","angular","angularUIRouter","interactions/controllers","text!interactions/index.tpl.html","text!interactions/begin.tpl.html","text!interactions/log.tpl.html","text!interactions/manage.tpl.html"],function(require){var angular=require("angular"),uiRouter=require("angularUIRouter"),interactionControllers=require("interactions/controllers"),defaultTemplate=require("text!interactions/index.tpl.html"),beginTemplate=require("text!interactions/begin.tpl.html"),viewTemplate=require("text!interactions/log.tpl.html"),manageTemplate=require("text!interactions/manage.tpl.html"),moduleName="kasparGUI.menu.interaction",dependancies=[uiRouter,interactionControllers],Routes=function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/"),$stateProvider.state("interaction",{url:"/interaction",template:defaultTemplate,"abstract":!0}).state("interaction.begin",{url:"/begin",template:beginTemplate,controller:"interactionController"}).state("interaction.view",{url:"{id:(?:/[0-9]{1,8})?}/view",template:viewTemplate,controller:"interactionController"}).state("interaction.manage",{url:"{id:(?:/[0-9]{1,8})?}/manage",template:manageTemplate,controller:"interactionController"})},module=angular.module(moduleName,dependancies);return module.config(["$stateProvider","$urlRouterProvider",Routes]),moduleName}),define("text!triggers/directives/buttonTriggerEditor.tpl.html",[],function(){return'<div>\r\n	<ng-form\r\n		name="buttonEditor"\r\n		model="button">\r\n	<div class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'trigger.button.name\']}}</span>\r\n		<input\r\n			name="buttonName"\r\n			saveable\r\n			required\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Button Trigger Name"\r\n			ng-model="button.name">\r\n	</div>\r\n	<div class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'trigger.button.action\']}}</span>\r\n		<select\r\n			class="selectpicker form-control"\r\n			saveable\r\n			name="action"\r\n			ng-model="button.action_id"\r\n			ng-options="action.id as action.name group by action.type for action in actions | orderBy:\'name\'">\r\n			<option value="">{{language[\'trigger.button.action.select.prompt\']}}</option>\r\n		</select>\r\n	</div>\r\n	<hotkey-editor\r\n		hotkey="hotkey"\r\n		button="button"\r\n		ng-repeat="hotkey in button.hotKeys"></hotkey-editor>\r\n	<button\r\n		class="btn btn-default"\r\n		type="button"\r\n		ng-click="addButton()">{{language[\'trigger.button.hotkey.new\']}}</button>\r\n	</ng-form>\r\n</div>'}),define("triggers/directives/ButtonTriggerEditor",["require","angular","triggers/models","text!./buttonTriggerEditor.tpl.html"],function(require){require("angular");require("triggers/models");var template=require("text!./buttonTriggerEditor.tpl.html"),ButtonTriggerEditor=function(ButtonHotkey,language){return{template:template,restrict:"E",scope:{button:"=trigger",actions:"="},controller:function($scope){$scope.language=language.getText(),$scope.addButton=function(){void 0===$scope.button.hotKeys&&($scope.button.hotKeys=[]),$scope.button.hotKeys.push(new ButtonHotkey({trigger_id:$scope.button.id}))}}}};return["ButtonHotkey","language",ButtonTriggerEditor]}),define("text!triggers/directives/compoundTriggerEditor.tpl.html",[],function(){return'<form\r\n	name="compountTriggerForm"\r\n	model="compound">\r\n	<div class="row">\r\n		<div class="col-lg-12">\r\n			<div class="input-group">\r\n				<span class="input-group-addon inputLabel">Name</span>\r\n				<input\r\n					type="text"\r\n					class="form-control"\r\n					placeholder="Compound Trigger Name"\r\n					saveable\r\n					required\r\n					name="name"\r\n					ng-model="time.name">\r\n			</div>\r\n			<div class="input-group">\r\n				<span class="input-group-addon inputLabel">Action</span>\r\n				<select\r\n					class="selectpicker form-control"\r\n					ng-model="time.action_id"\r\n					saveable\r\n					name="actionId"\r\n					ng-options="action.id as action.name group by action.type for action in actions | orderBy:\'name\'">\r\n					<option value="">No Action</option>\r\n				</select>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="row">\r\n		<strong>TODO:</strong>\r\n		<ul>\r\n			<li>When any selected are active</li>\r\n			<li>When all selected are active</li>\r\n		</ul>\r\n	</div>\r\n</form>'}),define("triggers/directives/CompoundTriggerEditor",["require","angular","text!./compoundTriggerEditor.tpl.html"],function(require){var template=(require("angular"),require("text!./compoundTriggerEditor.tpl.html")),CompoundTriggerEditor=function(language){return{template:template,restrict:"E",scope:{compound:"=trigger",actions:"=",triggers:"="},link:function(){},controller:function($scope){$scope.language=language.getText(),$scope.addTriggers=function(triggers){void 0===$scope.compound.triggers&&($scope.compound.triggers=[]);for(var i=0;i<triggers.length;i++)$scope.compound.triggers.push(triggers[i]);save()};var save=function(){var selfIndex=-1;if(void 0!==$scope.compound.id){for(var i=0;i<$scope.compound.triggers.length;i++)if($scope.compound.triggers[i].id===$scope.compound.id){selfIndex=i;break}}else selfIndex=$scope.compound.triggers.indexOf($scope.compound);$scope.compound.mustStayActive=!0,$scope.compound.time=0,$scope.compound.variance=0,$scope.compound.$save()};$scope.removeTriggers=function(triggers){for(var i=0;i<triggers.length;i++)$scope.time.triggers.splice($scope.time.triggers.indexOf(triggers[i]),1);save()}}}};return["language",CompoundTriggerEditor]}),define("text!triggers/directives/hotkeyEditor.tpl.html",[],function(){return'<ng-form\r\n	name="hotkeyEditor"\r\n	model="hotkey">\r\n	<div class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'trigger.button.hotkey.label\']}}</span>\r\n		<input\r\n			type="text"\r\n			name="key"\r\n			class="form-control"\r\n			placeholder="Click here to enter keys"\r\n			saveable\r\n			ng-keydown="updateKey($event, hotkey)"\r\n			ng-model="hotkey.keyString">\r\n		<span class="input-group-btn">\r\n			<button\r\n				class="btn btn-default"\r\n				type="button"\r\n				ng-click="deleteKey()">{{language[\'trigger.button.hotkey.delete\']}}</button>\r\n		</span>\r\n	</div>\r\n</ng-form>'}),define("triggers/directives/HotkeyEditor",["require","angular","mousetrap","mousetrapPause","common/services/displayServices","text!./hotkeyEditor.tpl.html"],function(require){require("angular");require("mousetrap"),require("mousetrapPause"),require("common/services/displayServices");var template=require("text!./hotkeyEditor.tpl.html"),HotkeyEditor=function(hotkeyFormatter,language){return{template:template,restrict:"E",scope:{hotkey:"=",button:"="},controller:function($scope){$scope.language=language.getText(),$scope.deleteKey=function(){$scope.button.hotKeys.splice($scope.button.hotKeys.indexOf($scope.hotkey),1),void 0!==$scope.hotkey.id&&$scope.hotkey.$delete()},$scope.updateKey=function($event,hotKey){var key=($event.which||$event.keyCode,hotkeyFormatter.getDisplayFromEvent($event));""!==key&&(hotKey.keyString=key,$scope.hotkeyEditor.key.$dirty=!0,$event.preventDefault())}}}};return["hotkeyFormatter","language",HotkeyEditor]}),define("text!triggers/directives/sensorTriggerEditor.tpl.html",[],function(){return'<div>\r\n	<ng-form\r\n		name="sensorEditor"\r\n		model="trigger">\r\n	<div class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'trigger.sensor.name\']}}</span>\r\n		<input\r\n			type="text"\r\n			class="form-control"\r\n			placeholder="Sensor Trigger Name"\r\n			name="name"\r\n			saveable\r\n			required\r\n			ng-model="trigger.name">\r\n	</div>\r\n	<div class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'trigger.sensor.action\']}}</span>\r\n		<select\r\n			class="selectpicker form-control"\r\n			saveable\r\n			name="action"\r\n			ng-model="trigger.action_id"\r\n			ng-options="action.id as action.name group by action.type for action in actions | orderBy:\'name\'">\r\n			<option value="">{{language[\'trigger.sensor.action.select.prompt\']}}</option>\r\n		</select>\r\n	</div>\r\n	<div class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'trigger.sensor.sensor\']}}</span>\r\n		<select\r\n			class="selectpicker form-control"\r\n			saveable\r\n			required\r\n			name="sensor"\r\n			ng-model="trigger.sensorName"\r\n			ng-options="sensor.name as sensor.name group by sensor.type for sensor in sensors | orderBy:\'name\'">\r\n			<option value="">{{language[\'trigger.sensor.sensor.select.prompt\']}}</option>\r\n		</select>\r\n	</div>\r\n	<sensor-value-editor\r\n		sensor="selectedSensor"\r\n		trigger="trigger"></sensor-value-editor>\r\n	<div>\r\n		<span>TODO:</span>\r\n		<ul>\r\n			<li>\'ActionSensor\' which triggers on action change</li>\r\n		</ul>\r\n	</div>\r\n	</ng-form>\r\n</div>'}),define("triggers/directives/SensorTriggerEditor",["require","angular","robots/models","text!./sensorTriggerEditor.tpl.html"],function(require){require("angular");require("robots/models");var template=require("text!./sensorTriggerEditor.tpl.html"),SensorTriggerEditor=function(Sensor,Trigger,language){return{template:template,restrict:"E",scope:{trigger:"=",actions:"="},link:function(){},controller:function($scope){$scope.language=language.getText(),$scope.sensors=Sensor.query(),$scope.$watch("trigger.sensorName",function(sensorName){$scope.sensors.$promise.then(function(sensors){if(void 0!==sensorName)for(var i=0;i<sensors.length;i++)if(sensors[i].name==sensorName){$scope.selectedSensor=sensors[i];break}})})}}};return["Sensor","Trigger","language",SensorTriggerEditor]}),define("text!triggers/directives/sensorValueEditor.tpl.html",[],function(){return'<div>\r\n	<div ng-show="sensor">\r\n		<div ng-if="sensor.value_type.type==\'DiscreteValueType\'">TODO:\r\n			Show discrete values</div>\r\n		<div ng-if="sensor.value_type.type==\'ContinuousValueType\'">\r\n			<button\r\n				type="button"\r\n				class="btn btn-primary"\r\n				ng-disabled="true">{{language[\'trigger.sensor.connect\']}}</button>\r\n			{{language[\'trigger.sensor.current\']}}\r\n			<progressbar\r\n				class="progress-striped active"\r\n				max="sensor.value_type.maxValue - sensor.value_type.minValue"\r\n				value="currentValue"> <i>{{current_value}}</i></progressbar>\r\n		</div>\r\n		<accordion close-others="true"> <accordion-group\r\n			is-open="basicopen"> <accordion-heading>\r\n		{{language[\'trigger.sensor.basic.label\']}}<i\r\n			class="pull-right glyphicon"\r\n			ng-class="{\'glyphicon-chevron-down\': basicopen, \'glyphicon-chevron-right\': !basicopen}"></i>\r\n		</accordion-heading>\r\n		<div>\r\n			<div class="btn-group">\r\n				<button\r\n					type="button"\r\n					class="btn btn-primary"\r\n					ng-model="trigger.sensorValue"\r\n					btn-radio="\'eval::on\'">{{language[\'trigger.sensor.basic.on\']}}</button>\r\n				<button\r\n					type="button"\r\n					class="btn btn-primary"\r\n					ng-model="trigger.sensorValue"\r\n					btn-radio="\'eval::off\'">{{language[\'trigger.sensor.basic.off\']}}</button>\r\n			</div>\r\n			<small>{{language[\'trigger.sensor.basic.help.short\']}}</small>\r\n		</div>\r\n		</accordion-group> <accordion-group is-open="advancedopen"> <accordion-heading>\r\n		{{language[\'trigger.sensor.advanced.label\']}} <i\r\n			class="pull-right glyphicon"\r\n			ng-class="{\'glyphicon-chevron-down\': advancedopen, \'glyphicon-chevron-right\': !advancedopen}"></i>\r\n		</accordion-heading>\r\n		<div class="col-lg-12">\r\n			<div class="input-group">\r\n				<div class="input-group-addon inputLabel">{{language[\'trigger.sensor.advanced.compare.label\']}}</div>\r\n				<select\r\n					class="selectpicker form-control"\r\n					name="sensorCompare"\r\n					ng-model="trigger.comparison"\r\n					saveable\r\n					required\r\n					style="width: 25%"\r\n					ng-options="value.compare as (value.name + \' (\' + value.compare + \')\') for value in comparisons">\r\n					<option value="">{{language[\'trigger.sensor.advanced.compare.select.prompt\']}}</option>\r\n				</select>\r\n				<div\r\n					guislider\r\n					name="sensorValue"\r\n					saveable\r\n					required\r\n					style="width: 75%"\r\n					floor="sensor.value_type.minValue"\r\n					ceiling="sensor.value_type.maxValue"\r\n					step="math.pow(10, -1 * sensor.value_type.precision)"\r\n					ng-model="trigger.sensorValue"></div>\r\n				<div\r\n					ng-if="sensor.value_type.type==\'ContinuousValueType\'"\r\n					class="input-group-addon">{{trigger.sensorValue}}</div>\r\n				<div\r\n					ng-if="sensor.value_type.type==\'DiscreteValueType\'"\r\n					class="input-group-addon">TODO: Discrete Values</div>\r\n			</div>\r\n		</div>\r\n		</accordion-group> </accordion>\r\n	</div>\r\n</div>'}),define("triggers/directives/SensorValueEditor",["require","angular","text!./sensorValueEditor.tpl.html"],function(require){var template=(require("angular"),require("text!./sensorValueEditor.tpl.html")),SensorValueEditor=function(Sensor,modelBuilder,language){return{template:template,restrict:"E",scope:{sensor:"=",trigger:"=",currentValue:"=value"},link:function(scope){scope.comparisons=[{name:"less than",compare:"<"},{name:"less or equal to",compare:"<="},{name:"exactly",compare:"=="},{name:"greater or equal to",compare:">="},{name:"greater than",compare:">"}]},controller:function($scope,$window){$scope.language=language.getText(),$scope.Math=$window.Math,$scope.sensor=null,$scope.basicopen=!1,$scope.advancedopen=!0,$scope.$watch("trigger.sensorValue",function(value){void 0!==value&&null!==value&&($scope.basicopen=void 0!==value.indexOf&&0===value.indexOf("eval::"),$scope.advancedopen=!$scope.basicopen)}),$scope.$watch("sensor",function(sensor){if(void 0!==sensor&&void 0!==sensor.id)if(void 0===sensor._link)$scope.sensor=Sensor.get({id:sensor.id}),$scope.sensor.$promise.then(function(){void 0!==$scope.sensor&&($scope.sensor=$scope.sensor.getConcreteClassInstance())});else{var Model=modelBuilder.getModel(sensor._link.model);$scope.model=Model.get({id:$scope.model})}})}}};return["Sensor","modelBuilder","language",SensorValueEditor]}),define("text!triggers/directives/timeTriggerEditor.tpl.html",[],function(){return'<form\r\n	name="timeTriggerForm"\r\n	model="time">\r\n	<div class="row">\r\n		<div class="col-lg-12">\r\n			<div class="input-group">\r\n				<span class="input-group-addon inputLabel">{{language[\'trigger.time.name\']}}</span>\r\n				<input\r\n					type="text"\r\n					class="form-control"\r\n					placeholder="Time Trigger Name"\r\n					saveable\r\n					required\r\n					name="name"\r\n					ng-model="time.name">\r\n			</div>\r\n			<div class="input-group">\r\n				<span class="input-group-addon inputLabel">{{language[\'trigger.time.action\']}}</span>\r\n				<select\r\n					class="selectpicker form-control"\r\n					ng-model="time.action_id"\r\n					saveable\r\n					name="actionId"\r\n					ng-options="action.id as action.name group by action.type for action in actions | orderBy:\'name\'">\r\n					<option value="">{{language[\'trigger.time.action.select.prompt\']}}</option>\r\n				</select>\r\n			</div>\r\n			<div class="input-group">\r\n				<span class="input-group-addon inputLabel">{{language[\'trigger.time.trigger\']}}</span>\r\n				<select\r\n					class="selectpicker form-control"\r\n					ng-model="time.trigger_id"\r\n					saveable\r\n					name="triggerId"\r\n					ng-options="trigger.id as trigger.name group by trigger.type for trigger in triggers | orderBy:\'name\'">\r\n					<option value="">{{language[\'trigger.time.trigger.select.prompt\']}}</option>\r\n				</select>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="row">\r\n		<div class="col-lg-12">\r\n			<div class="input-group">\r\n				<div class="input-group-addon inputLabel">{{language[\'trigger.time.time\']}}</div>\r\n				<span class="input-group-btn">\r\n					<button\r\n						type="button"\r\n						class="btn btn-primary"\r\n						ng-model="time.mustStayActive"\r\n						saveable\r\n						required\r\n						name="whileActive"\r\n						btn-radio="true">{{language[\'trigger.time.time.while\']}}</button>\r\n					<button\r\n						type="button"\r\n						class="btn btn-primary"\r\n						saveable\r\n						required\r\n						name="stayActive"\r\n						ng-model="time.mustStayActive"\r\n						btn-radio="false">{{language[\'trigger.time.time.since\']}}</button>\r\n				</span>\r\n				<div\r\n					guislider\r\n					name="time"\r\n					saveable\r\n					required\r\n					floor="0"\r\n					ceiling="300"\r\n					ng-model="time.time"></div>\r\n				<div class="input-group-addon">{{time.time}}\r\n					{{language[\'trigger.time.time.units\']}} &#177;</div>\r\n				<div\r\n					guislider\r\n					name="variance"\r\n					saveable\r\n					required\r\n					floor="0"\r\n					ceiling="time.time"\r\n					ng-model="time.variance"></div>\r\n				<div class="input-group-addon">{{time.variance}}\r\n					{{language[\'trigger.time.time.units\']}}</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</form>'}),define("triggers/directives/TimeTriggerEditor",["require","angular","triggers/models","text!./timeTriggerEditor.tpl.html"],function(require){require("angular");require("triggers/models");var template=require("text!./timeTriggerEditor.tpl.html"),TimeTriggerEditor=function(language){return{template:template,restrict:"E",scope:{time:"=trigger",actions:"=",triggers:"="},link:function(){},controller:function($scope){$scope.language=language.getText(),$scope.addTriggers=function(triggers){void 0===$scope.time.triggers&&($scope.time.triggers=[]);for(var i=0;i<triggers.length;i++)$scope.time.triggers.push(triggers[i]);save()};var save=function(){var selfIndex=-1;if(void 0!==$scope.time.id){for(var i=0;i<$scope.time.triggers.length;i++)if($scope.time.triggers[i].id===$scope.time.id){selfIndex=i;break}}else selfIndex=$scope.time.triggers.indexOf($scope.time);selfIndex>=0?($scope.time.triggers.splice(selfIndex,1),$scope.time.selfRef=!0,$scope.time.$save(function(){selfIndex=-1;for(var i=0;i<$scope.time.triggers.length;i++)if($scope.time.triggers[i].id===$scope.time.id){selfIndex=i;break}0>selfIndex&&$scope.time.triggers.push($scope.time)})):$scope.time.$save()};$scope.removeTriggers=function(triggers){for(var i=0;i<triggers.length;i++)$scope.time.triggers.splice($scope.time.triggers.indexOf(triggers[i]),1);save()}}}};return["language",TimeTriggerEditor]}),define("text!triggers/directives/triggerEditor.tpl.html",[],function(){return'<buttontrigger-editor\r\n	ng-if="trigger.type==\'ButtonTrigger\'"\r\n	trigger="trigger"\r\n	actions="actions"></buttontrigger-editor>\r\n<compoundtrigger-editor\r\n	ng-if="trigger.type==\'CompoundTrigger\'"\r\n	trigger="trigger"\r\n	triggers="triggers"\r\n	actions="actions"></compoundtrigger-editor>\r\n<sensortrigger-editor\r\n	ng-if="trigger.type==\'SensorTrigger\'"\r\n	trigger="trigger"\r\n	actions="actions"></sensortrigger-editor>\r\n<timetrigger-editor\r\n	ng-if="trigger.type==\'TimeTrigger\'"\r\n	trigger="trigger"\r\n	triggers="triggers"\r\n	actions="actions"></timetrigger-editor>'}),define("triggers/directives/TriggerEditor",["require","angular","text!./triggerEditor.tpl.html"],function(require){var template=(require("angular"),require("text!./triggerEditor.tpl.html")),TriggerEditor=function($compile,language){return{template:template,restrict:"E",scope:{trigger:"=",triggers:"=",actions:"="},controller:function($scope){$scope.language=language.getText()}}};return["$compile","language",TriggerEditor]}),define("triggers/directives",["require","angular","common/i18n/languageServices","common/services/displayServices","common/filters","triggers/models","robots/models","./directives/ButtonTriggerEditor","./directives/CompoundTriggerEditor","./directives/HotkeyEditor","./directives/SensorTriggerEditor","./directives/SensorValueEditor","./directives/TimeTriggerEditor","./directives/TriggerEditor"],function(require){{var angular=require("angular"),languageServices=require("common/i18n/languageServices"),displayServices=require("common/services/displayServices"),filters=require("common/filters"),triggerModels=require("triggers/models"),robotModels=require("robots/models"),ButtonTriggerEditor=require("./directives/ButtonTriggerEditor"),CompoundTriggerEditor=require("./directives/CompoundTriggerEditor"),HotkeyEditor=require("./directives/HotkeyEditor"),SensorTriggerEditor=require("./directives/SensorTriggerEditor"),SensorValueEditor=require("./directives/SensorValueEditor"),TimeTriggerEditor=require("./directives/TimeTriggerEditor"),TriggerEditor=require("./directives/TriggerEditor"),moduleName="kasparGUI.triggers.directives",dependancies=[displayServices,languageServices,filters,robotModels,triggerModels];angular.module(moduleName,dependancies).directive("buttontriggerEditor",ButtonTriggerEditor).directive("compoundtriggerEditor",CompoundTriggerEditor).directive("hotkeyEditor",HotkeyEditor).directive("sensortriggerEditor",SensorTriggerEditor).directive("sensorValueEditor",SensorValueEditor).directive("timetriggerEditor",TimeTriggerEditor).directive("triggerEditor",TriggerEditor)}return moduleName}),define("triggers/TriggerController",["require","angular","actions/models","triggers/models","robots/models"],function(require){var angular=require("angular");require("actions/models"),require("triggers/models"),require("robots/models");var TriggerController=function($scope,$http,Action,Trigger,TriggerType,Robot,language){$scope.language=language.getText(),$scope.triggers=Trigger.query(),$scope.actions=Action.query(),$scope.types=TriggerType.query(),$scope.newobjs=[],$scope.setFiles=function(element){$scope.$apply(function($scope){$scope.files=element.files})},$scope.$watch("trigger",function(action){if(void 0!==action){var abstractTrigger=$scope.trigger,concreteTrigger=$scope.trigger.getConcreteClassInstance();concreteTrigger.$promise.then(function(){$scope.triggers[$scope.triggers.indexOf(abstractTrigger)]=concreteTrigger,$scope.trigger=concreteTrigger})}}),$scope.newTrigger=function(){$scope.trigger=new Trigger,$scope.triggers.push($scope.trigger)},$scope.deleteTrigger=function(trigger){$scope.triggers.splice($scope.triggers.indexOf(trigger),1),$scope.trigger=$scope.triggers[0],trigger.$delete()};var errorFunc=function(status){console.log("Error sending file:"+status)},successFunc=function(data){$scope.newobjs.push(data)};$scope.importFiles=function(files){for(var i=0;i<files.length;i++){var fd=new FormData;fd.append("data",files[i]);{$http.post("/api/Trigger/import",fd,{headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(successFunc).error(errorFunc)}}}};return["$scope","$http","Action","Trigger","TriggerType","Robot","language",TriggerController]}),define("triggers/controllers",["require","angular","common/i18n/languageServices","actions/models","triggers/models","triggers/directives","./TriggerController"],function(require){{var angular=require("angular"),languageServices=require("common/i18n/languageServices"),actionModels=require("actions/models"),triggerModels=require("triggers/models"),triggerDirectives=require("triggers/directives"),TriggerController=require("./TriggerController"),moduleName="kasparGUI.triggers.controllers",dependancies=[actionModels,languageServices,triggerModels,triggerDirectives];angular.module(moduleName,dependancies).controller("triggerController",TriggerController)}return moduleName}),define("text!triggers/index.tpl.html",[],function(){return"<ui-view />"}),define("text!triggers/triggerEdit.tpl.html",[],function(){return'<div\r\n	id="triggersList">\r\n	<div class="input-group">\r\n		<span class="input-group-addon inputLabel">{{language[\'trigger.label\']}}</span>\r\n		<select\r\n			class="selectpicker form-control"\r\n			ng-model="trigger"\r\n			ng-disabled="triggers.length == 0"\r\n			ng-options="item.name group by item.type for item in triggers | orderBy:\'name\'">\r\n			<option value="">{{language[\'trigger.select.prompt\']}}</option>\r\n		</select>\r\n		<span class="input-group-btn">\r\n			<button\r\n				class="btn btn-default"\r\n				type="button"\r\n				ng-click="newTrigger()">{{language[\'trigger.new\']}}</button>\r\n			<button\r\n				ng-disabled="!trigger"\r\n				class="btn btn-default"\r\n				type="button"\r\n				ng-click="deleteTrigger(trigger)">{{language[\'trigger.delete\']}}</button>\r\n		</span>\r\n	</div>\r\n	<div ng-show="trigger">\r\n		<div class="input-group">\r\n			<span class="input-group-addon inputLabel">{{language[\'trigger.type.label\']}}</span>\r\n			<select\r\n				ng-disabled="trigger.id"\r\n				class="selectpicker form-control"\r\n				ng-model="trigger.type"\r\n				ng-options="type.name as type.disp for type in types | orderBy:\'type.disp\'">\r\n				<option value="">{{language[\'trigger.type.select.prompt\']}}</option>\r\n			</select>\r\n		</div>\r\n		<trigger-editor\r\n			trigger="trigger"\r\n			actions="actions"\r\n			triggers="triggers"></trigger-editor>\r\n	</div>\r\n</div>'}),define("text!triggers/triggerTest.tpl.html",[],function(){return'<h3 class="text-center">Trigger Test Window</h3>\r\n<div>Test trigger conditions without running action</div>\r\n<div>\r\n	<strong>TODO</strong>\r\n	<ul>\r\n		<li><strong> Will need to revisit after all triggers are\r\n				available </strong></li>\r\n	</ul>\r\n</div>'}),define("text!triggers/triggerImport.tpl.html",[],function(){return'<div>\r\n	<div class="btn-group">\r\n		<div class="input-group">\r\n			<span class="input-group-addon inputLabel">{{language[\'trigger.import.selectFiles\']}}</span>\r\n			<input\r\n				class="form-control"\r\n				type="file"\r\n				multiple="multiple"\r\n				onchange="angular.element(this).scope().setFiles(this)" />\r\n			<span class="input-group-btn">\r\n				<button\r\n					class="btn btn-default"\r\n					type="button"\r\n					ng-click="importFiles(files)">{{language[\'trigger.import.upload\']}}</button>\r\n			</span>\r\n		</div>\r\n	</div>\r\n	<div>\r\n		<div ng-repeat="obj in newobjs">{{obj}}</div>\r\n	</div>\r\n</div>'}),define("categories/trigger",["require","angular","angularUIRouter","triggers/controllers","text!triggers/index.tpl.html","text!triggers/triggerEdit.tpl.html","text!triggers/triggerTest.tpl.html","text!triggers/triggerImport.tpl.html"],function(require){var angular=require("angular"),uiRouter=require("angularUIRouter"),triggerControllers=require("triggers/controllers"),defaultTemplate=require("text!triggers/index.tpl.html"),editTemplate=require("text!triggers/triggerEdit.tpl.html"),testTemplate=require("text!triggers/triggerTest.tpl.html"),importTemplate=require("text!triggers/triggerImport.tpl.html"),moduleName="kasparGUI.menu.trigger",dependancies=[uiRouter,triggerControllers],Routes=function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/"),$stateProvider.state("trigger",{url:"/trigger",template:defaultTemplate,"abstract":!0}).state("trigger.edit",{url:"{id:(?:/[0-9]{1,8})?}/edit",template:editTemplate,controller:"triggerController"}).state("trigger.test",{url:"{id:(?:/[0-9]{1,8})?}/test",template:testTemplate,controller:"triggerController"}).state("trigger.import",{url:"/import",template:importTemplate,controller:"triggerController"})},module=angular.module(moduleName,dependancies);return module.config(["$stateProvider","$urlRouterProvider",Routes]),moduleName}),define("common/directives/KeyBinding",["require","angular","mousetrap"],function(require){var angular=require("angular"),Mousetrap=require("mousetrap"),KeyBinding=function($timeout){return{restrict:"E",scope:{invoke:"&"},link:function(scope,element,attrs){attrs.button?Mousetrap.bind(attrs.on,function(){scope.invoke();var elem=angular.element(element).parent().find(attrs.button);elem&&(elem.addClass("active"),$timeout(elem.removeClass("active"),2e3))}):Mousetrap.bind(attrs.on,scope.invoke)},controller:function(){}}};return["$timeout",KeyBinding]}),define("common/directives/Model",["require","angular"],function(require){var Model=(require("angular"),function(modelBuilder){return{restrict:"A",require:"form",link:function(scope,element,attrs,controller){scope.formCtrl=controller,attrs.$observe("model",function(modelName){scope.$watch(modelName,function(modelInstance){scope.model=modelInstance})})},controller:function($scope){this.updateObj=function(modelCtrl){if($scope.formCtrl.$valid){if(void 0===$scope.model.$save){if(void 0===$scope.model._link)return;var Model=modelBuilder.getModel($scope.model._link.model);$scope.model=new Model($scope.model)}$scope.model.$save().then(function(){modelCtrl.$setPristine()})}},this.newObj=function(Type){var newO=new Type;return newO},this.deleteObj=function(item){return item.$delete(function(){})}}}});return["modelBuilder",Model]}),define("text!common/directives/navbar.tpl.html",[],function(){return'<div\r\n	class="col-sm-3 col-md-2 col-lg-2 maxHeight scrollable hidden-print navbar">\r\n	<div class="panel-group">\r\n		<div\r\n			class="panel panel-default"\r\n			ng-repeat="group in groups | orderBy:\'order\'">\r\n			<div class="panel-heading">\r\n				<h4 class="panel-title">{{language[group.title]}}</h4>\r\n			</div>\r\n			<div class="nav-collapse in">\r\n				<div\r\n					ng-repeat="link in group.links | orderBy:\'order\'"\r\n					ui-sref-active="highlight">\r\n					<a ui-sref="{{link.path}}">{{language[link.title]}}</a>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>'}),define("common/directives/Navbar",["require","angular","angularUIRouter","common/models","text!./navbar.tpl.html"],function(require){require("angular");require("angularUIRouter");var template=(require("common/models"),require("text!./navbar.tpl.html")),Navbar=function(Menu){return{template:template,restrict:"E",scope:{},controller:function($scope,language){$scope.language=language.getText(),$scope.groups=Menu.query()}}};return["Menu","language",Navbar]}),define("common/directives/NotEmpty",["require","angular"],function(require){var NotEmpty=(require("angular"),function(){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,controller){controller.$parsers.unshift(function(value){return void 0===value||""===value?void controller.$setValidity("notEmpty",!1):void controller.$setValidity("notEmpty",!0)})}}});return NotEmpty}),define("common/directives/Saveable",["require","angular"],function(require){var angular=require("angular"),Saveable=function($compile,$timeout){return{restrict:"A",require:["ngModel","^form","^model"],link:function(scope,element,attrs,controllers){var name=controllers[1].$name+"."+controllers[0].$name,updateCalled=!1,parentElement=angular.element(element[0].parentElement),modelCtrl=controllers[0],saveCtrl=controllers[2];scope.$watch(name+".$dirty",function(value){value?parentElement.addClass("has-warning"):parentElement.removeClass("has-warning")}),scope.$watch(name+".$valid",function(value){modelCtrl.$dirty&&(value?parentElement.removeClass("has-error"):parentElement.addClass("has-error"))}),scope.$watch(name+".$pristine",function(value){value?updateCalled&&(parentElement.addClass("has-success"),$timeout(function(){parentElement.removeClass("has-success")},2e3),updateCalled=!1):parentElement.removeClass("has-success")});var callUpdate=function(){modelCtrl.$dirty&&modelCtrl.$valid&&(saveCtrl.updateObj(modelCtrl),updateCalled=!0)};element[0].addEventListener("blur",function(){callUpdate()},!0),element.on("keyup",function($event){var code=$event.which||$event.keyCode;13==code&&callUpdate()})}}};return["$compile","$timeout",Saveable]}),define("text!common/directives/slider.tpl.html",[],function(){return'\r\n<input\r\n	type="range"\r\n	class="form-control"\r\n	min="{{floor}}"\r\n	max="{{ceiling}}" />'
}),define("common/directives/Slider",["require","angular","text!./slider.tpl.html"],function(require){var template=(require("angular"),require("text!./slider.tpl.html")),Slider=function(){return{template:template,restrict:"EA",replace:!0,scope:{name:"=",value:"=?",floor:"=?",ceiling:"=?",step:"=?",precision:"=?"},compile:function(element){element[0].removeAttribute("floor"),element[0].removeAttribute("ceiling"),element[0].removeAttribute("step"),element[0].removeAttribute("guislider"),element[0].removeAttribute("precision")},controller:function($scope,language){$scope.language=language.getText(),void 0===$scope.floor&&($scope.floor=0),void 0===$scope.ceiling&&($scope.ceiling=100),void 0===$scope.step&&($scope.step=1),void 0===$scope.precision&&($scope.precision=0),void 0===$scope.value&&($scope.value=0)}}};return["language",Slider]}),define("common/directives",["require","angular","common/i18n/languageServices","common/services/displayServices","common/filters","./directives/KeyBinding","./directives/Model","./directives/Navbar","./directives/NotEmpty","./directives/Saveable","./directives/Slider"],function(require){{var angular=require("angular"),languageServices=require("common/i18n/languageServices"),displayServices=require("common/services/displayServices"),filters=require("common/filters"),KeyBinding=require("./directives/KeyBinding"),Model=require("./directives/Model"),Navbar=require("./directives/Navbar"),NotEmpty=require("./directives/NotEmpty"),Saveable=require("./directives/Saveable"),Slider=require("./directives/Slider"),moduleName="kasparGUI.common.directives",dependancies=[displayServices,languageServices,filters];angular.module(moduleName,dependancies).directive("keybinding",KeyBinding).directive("model",Model).directive("guislider",Slider).directive("navbar",Navbar).directive("notEmpty",NotEmpty).directive("saveable",Saveable)}return moduleName}),define("app",["require","angular","angularUIRouter","angularBoostrap","common/services/modelServices","text!./default.tpl.html","categories/action","categories/admin","categories/interaction","categories/trigger","common/controllers","common/directives","robots/directives","actions/directives"],function(require){var angular=require("angular"),angularRouter=require("angularUIRouter"),angularBootstrap=require("angularBoostrap"),defaultTemplate=(require("common/services/modelServices"),require("text!./default.tpl.html")),action=require("categories/action"),admin=require("categories/admin"),interaction=require("categories/interaction"),trigger=require("categories/trigger"),commonControllers=require("common/controllers"),commonDirectives=require("common/directives"),robotsDirectives=require("robots/directives"),moduleName=(require("actions/directives"),"kasparGUI"),dependancies=[angularRouter,angularBootstrap,commonControllers,commonDirectives,robotsDirectives,action,admin,interaction,trigger],Routes=function($stateProvider,$urlRouterProvider,$locationProvider){$locationProvider.html5Mode(!0),$urlRouterProvider.otherwise("/"),$stateProvider.state("default",{url:"/",template:defaultTemplate})},ApiConfig=function(modelBuilderProvider){modelBuilderProvider.setBasePath("/api")},module=angular.module(moduleName,dependancies);return module.config(["$stateProvider","$urlRouterProvider","$locationProvider",Routes]),module.config(["modelBuilderProvider",ApiConfig]),moduleName})}();
//# sourceMappingURL=app.js.map